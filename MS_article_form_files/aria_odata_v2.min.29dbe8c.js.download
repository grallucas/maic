!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var i=t();for(var n in i)("object"==typeof exports?exports:e)[n]=i[n]}}(this,function(){return function(e){function t(n){if(i[n])return i[n].exports;var r=i[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var i={};return t.m=e,t.c=i,t.i=function(e){return e},t.d=function(e,i,n){t.o(e,i)||Object.defineProperty(e,i,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var i=e&&e.e?function(){return e.default}:function(){return e};return t.d(i,"a",i),i},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=30)}([function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});!function(e){e[e.Unspecified=0]="Unspecified",e[e.String=1]="String",e[e.Int64=2]="Int64",e[e.Double=3]="Double",e[e.Boolean=4]="Boolean",e[e.Date=5]="Date"}(t.AWTPropertyType||(t.AWTPropertyType={}));!function(e){e[e.NotSet=0]="NotSet",e[e.DistinguishedName=1]="DistinguishedName",e[e.GenericData=2]="GenericData",e[e.IPV4Address=3]="IPV4Address",e[e.IPv6Address=4]="IPv6Address",e[e.MailSubject=5]="MailSubject",e[e.PhoneNumber=6]="PhoneNumber",e[e.QueryString=7]="QueryString",e[e.SipAddress=8]="SipAddress",e[e.SmtpAddress=9]="SmtpAddress",e[e.Identity=10]="Identity",e[e.Uri=11]="Uri",e[e.Fqdn=12]="Fqdn",e[e.IPV4AddressLegacy=13]="IPV4AddressLegacy"}(t.AWTPiiKind||(t.AWTPiiKind={}));!function(e){e[e.NotSet=0]="NotSet",e[e.GenericContent=1]="GenericContent"}(t.AWTCustomerContentKind||(t.AWTCustomerContentKind={}));!function(e){e[e.Low=1]="Low",e[e.Normal=2]="Normal",e[e.High=3]="High",e[e.Immediate_sync=5]="Immediate_sync"}(t.AWTEventPriority||(t.AWTEventPriority={}));!function(e){e[e.NonRetryableStatus=1]="NonRetryableStatus",e[e.QueueFull=3]="QueueFull"}(t.AWTEventsDroppedReason||(t.AWTEventsDroppedReason={}));!function(e){e[e.InvalidEvent=1]="InvalidEvent",e[e.SizeLimitExceeded=2]="SizeLimitExceeded",e[e.KillSwitch=3]="KillSwitch"}(t.AWTEventsRejectedReason||(t.AWTEventsRejectedReason={}))},function(e,t,i){"use strict";function n(e){var t=new B.Int64("0");return t.low=4294967295&e,t.high=Math.floor(e/4294967296),t}function r(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(C,function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})}function o(e){return"string"==typeof e}function s(e){return"number"==typeof e}function a(e){return"boolean"==typeof e}function u(e){return e instanceof Date}function d(e){return(e+b)*R}function c(e){var t=e.indexOf("-");return t>-1?e.substring(0,t):""}function _(){return O===D&&(O="undefined"!=typeof navigator&&Boolean(navigator.sendBeacon)),O}function l(){return N===D&&(N="undefined"!=typeof Uint8Array&&!W()&&!y()),N}function p(e){return!(!s(e)||!(e>=1&&e<=3||5===e))}function f(e,i){return!t.PropertyNameRegex.test(e)||P(i)?D:(P(i.value)&&(i={value:i,type:w.AWTPropertyType.Unspecified}),i.type=m(i.value,i.type),i.type?(u(i.value)&&(i.value=d(i.value.getTime())),i.pii>0&&i.cc>0?D:i.pii?A(i.pii)?i:D:i.cc?I(i.cc)?i:D:i):D)}function h(e){return e.getUTCFullYear()+"-"+T(e.getUTCMonth()+1)+"-"+T(e.getUTCDate())+"T"+T(e.getUTCHours())+":"+T(e.getUTCMinutes())+":"+T(e.getUTCSeconds())+"."+g(e.getUTCMilliseconds())+"Z"}function v(){if(M===D){var e=new XMLHttpRequest;M=void 0===e.withCredentials&&"undefined"!=typeof XDomainRequest}return M}function y(){return!("undefined"==typeof navigator||!navigator.product)&&"ReactNative"===navigator.product}function T(e){return e<10?"0"+e:e.toString()}function g(e){return e<10?"00"+e:e<100?"0"+e:e.toString()}function m(e,t){switch(t=E(t)?t:w.AWTPropertyType.Unspecified){case w.AWTPropertyType.Unspecified:return S(e);case w.AWTPropertyType.String:return o(e)?t:D;case w.AWTPropertyType.Boolean:return a(e)?t:D;case w.AWTPropertyType.Date:return u(e)&&NaN!==e.getTime()?t:D;case w.AWTPropertyType.Int64:return s(e)&&e%1==0?t:D;case w.AWTPropertyType.Double:return s(e)?t:D}return D}function S(e){switch(typeof e){case"string":return w.AWTPropertyType.String;case"boolean":return w.AWTPropertyType.Boolean;case"number":return w.AWTPropertyType.Double;case"object":return u(e)?w.AWTPropertyType.Date:D}return D}function A(e){return!!(s(e)&&e>=0&&e<=13)}function I(e){return!!(s(e)&&e>=0&&e<=1)}function E(e){return!!(s(e)&&e>=0&&e<=4)}function W(){if("undefined"!=typeof navigator&&navigator.userAgent){var e=navigator.userAgent.toLowerCase();if((e.indexOf("safari")>=0||e.indexOf("firefox")>=0)&&e.indexOf("chrome")<0)return!0}return!1}function P(e){return void 0===e||e===D||""===e}Object.defineProperty(t,"__esModule",{value:!0});var B=i(4),w=i(0),C=/[xy]/g,b=621355968e5,R=1e4,D=null;t.EventNameAndTypeRegex=/^[a-zA-Z]([a-zA-Z0-9]|_){2,98}[a-zA-Z0-9]$/,t.EventNameDotRegex=/\./g,t.PropertyNameRegex=/^[a-zA-Z](([a-zA-Z0-9|_|\.]){0,98}[a-zA-Z0-9])?$/,t.StatsApiKey="a387cfcf60114a43a7699f9fbb49289e-9bceb9fe-1c06-460f-96c5-6a0b247358bc-7238";var O=D,N=D,M=D;t.numberToBondInt64=n,t.newGuid=r,t.isString=o,t.isNumber=s,t.isBoolean=a,t.isDate=u,t.msToTicks=d,t.getTenantId=c,t.isBeaconsSupported=_,t.isUint8ArrayAvailable=l,t.isPriority=p,t.sanitizeProperty=f,t.getISOString=h,t.useXDomainRequest=v,t.isReactNative=y},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){}return e.addNotificationListener=function(e){this.listeners.push(e)},e.removeNotificationListener=function(e){for(var t=this.listeners.indexOf(e);t>-1;)this.listeners.splice(t,1),t=this.listeners.indexOf(e)},e.eventsSent=function(e){for(var t=this,i=this,n=0;n<this.listeners.length;++n)!function(n){i.listeners[n].eventsSent&&setTimeout(function(){return t.listeners[n].eventsSent(e)},0)}(n)},e.eventsDropped=function(e,t){for(var i=this,n=this,r=0;r<this.listeners.length;++r)!function(r){n.listeners[r].eventsDropped&&setTimeout(function(){return i.listeners[r].eventsDropped(e,t)},0)}(r)},e.eventsRetrying=function(e){for(var t=this,i=this,n=0;n<this.listeners.length;++n)!function(n){i.listeners[n].eventsRetrying&&setTimeout(function(){return t.listeners[n].eventsRetrying(e)},0)}(n)},e.eventsRejected=function(e,t){for(var i=this,n=this,r=0;r<this.listeners.length;++r)!function(r){n.listeners[r].eventsRejected&&setTimeout(function(){return i.listeners[r].eventsRejected(e,t)},0)}(r)},e.listeners=[],e}();t.default=n},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(14),r=i(0),o=i(28),s=i(10),a=i(5),u=i(11),d=i(1),c=function(){function e(){}return e.setEventsHandler=function(e){this.t=e},e.getEventsHandler=function(){return this.t},e.scheduleTimer=function(){var e=this,t=this.r[this.a][2];this.u<0&&t>=0&&!this._&&(this.t.hasEvents()?(0===t&&this.f>0&&(t=1),this.u=setTimeout(function(){return e.h()},t*(1<<this.f)*1e3)):this.v=0)},e.initialize=function(e){var t=this;this.y=!0,this.T=e,this.t=new o.default(e.collectorUri,e.cacheMemorySizeLimitInNumberOfEvents,e.httpXHROverride,e.clockSkewRefreshDurationInMins),this.g(),s.default.initialize(function(e,i){if(t.T.canSendStatEvent("awt_stats")){var n=new a.default("awt_stats");n.setEventPriority(r.AWTEventPriority.High),n.setProperty("TenantId",i);for(var o in e)e.hasOwnProperty(o)&&n.setProperty(o,e[o].toString());u.default.getLogger(d.StatsApiKey).logEvent(n)}})},e.setTransmitProfile=function(e){this.a!==e&&void 0!==this.r[e]&&(this.clearTimeout(),this.a=e,this.scheduleTimer())},e.loadTransmitProfiles=function(e){this.S();for(var t in e)if(e.hasOwnProperty(t)){if(3!==e[t].length)continue;for(var i=2;i>=0;--i)if(e[t][i]<0){for(var n=i;n>=0;--n)e[t][n]=-1;break}for(var i=2;i>0;--i)if(e[t][i]>0&&e[t][i-1]>0){var r=e[t][i-1]/e[t][i];e[t][i-1]=Math.ceil(r)*e[t][i]}this.r[t]=e[t]}},e.sendEvent=function(e){this.y&&(this.f>0&&e.priority===r.AWTEventPriority.Immediate_sync&&(e.priority=r.AWTEventPriority.High),this.t.addEvent(e),this.scheduleTimer())},e.flush=function(e){var t=(new Date).getTime();!this._&&this.A+3e4<t&&(this.A=t,this.u>-1&&(clearTimeout(this.u),this.u=-1),this.t.uploadNow(e))},e.pauseTransmission=function(){this._||(this.clearTimeout(),this.t.pauseTransmission(),this._=!0)},e.resumeTransmision=function(){this._&&(this._=!1,this.t.resumeTransmission(),this.scheduleTimer())},e.flushAndTeardown=function(){s.default.teardown(),this.y=!1,this.clearTimeout(),this.t.teardown()},e.backOffTransmission=function(){this.f<4&&(this.f++,this.clearTimeout(),this.scheduleTimer())},e.clearBackOff=function(){this.f>0&&(this.f=0,this.clearTimeout(),this.scheduleTimer())},e.S=function(){this.clearTimeout(),this.g(),this.a=n.AWT_REAL_TIME,this.scheduleTimer()},e.clearTimeout=function(){this.u>0&&(clearTimeout(this.u),this.u=-1,this.v=0)},e.h=function(){var e=r.AWTEventPriority.High;this.v++,this.v*this.r[this.a][2]===this.r[this.a][0]?(e=r.AWTEventPriority.Low,this.v=0):this.v*this.r[this.a][2]===this.r[this.a][1]&&(e=r.AWTEventPriority.Normal),this.t.sendEventsForPriorityAndAbove(e),this.u=-1,this.scheduleTimer()},e.g=function(){this.r={},this.r[n.AWT_REAL_TIME]=[4,2,1],this.r[n.AWT_NEAR_REAL_TIME]=[12,6,3],this.r[n.AWT_BEST_EFFORT]=[36,18,9]},e.y=!1,e.a=n.AWT_REAL_TIME,e.u=-1,e.f=0,e._=!1,e.v=0,e.A=0,e}();t.default=c},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e){this.low=0,this.high=0,this.low=parseInt(e,10),this.low<0&&(this.high=-1)}return e.prototype.I=function(t){var i=new e(t);return this.low===i.low&&this.high===i.high},e}();t.Int64=n;var r=function(){function e(e){this.low=0,this.high=0,this.low=parseInt(e,10)}return e.prototype.I=function(t){var i=new e(t);return this.low===i.low&&this.high===i.high},e}();t.UInt64=r;var o=function(){function e(){}return e.W=function(e){return this.P(e)},e.P=function(e){return 255&e},e.B=function(e){return 2147483647&e|2147483648&e},e.w=function(e){return 4294967295&e},e}();t.Number=o},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(1),r=i(0),o=function(){function e(e){this.C={name:"",properties:{}},e&&this.setName(e)}return e.prototype.setName=function(e){this.C.name=e},e.prototype.getName=function(){return this.C.name},e.prototype.setType=function(e){this.C.type=e},e.prototype.getType=function(){return this.C.type},e.prototype.setTimestamp=function(e){this.C.timestamp=e},e.prototype.getTimestamp=function(){return this.C.timestamp},e.prototype.setEventPriority=function(e){this.C.priority=e},e.prototype.getEventPriority=function(){return this.C.priority},e.prototype.setProperty=function(e,t,i){void 0===i&&(i=r.AWTPropertyType.Unspecified);var o={value:t,type:i,pii:r.AWTPiiKind.NotSet,cc:r.AWTCustomerContentKind.NotSet};if(null===(o=n.sanitizeProperty(e,o)))return void delete this.C.properties[e];this.C.properties[e]=o},e.prototype.setPropertyWithPii=function(e,t,i,o){void 0===o&&(o=r.AWTPropertyType.Unspecified);var s={value:t,type:o,pii:i,cc:r.AWTCustomerContentKind.NotSet};if(null===(s=n.sanitizeProperty(e,s)))return void delete this.C.properties[e];this.C.properties[e]=s},e.prototype.setPropertyWithCustomerContent=function(e,t,i,o){void 0===o&&(o=r.AWTPropertyType.Unspecified);var s={value:t,type:o,pii:r.AWTPiiKind.NotSet,cc:i};if(null===(s=n.sanitizeProperty(e,s)))return void delete this.C.properties[e];this.C.properties[e]=s},e.prototype.getPropertyMap=function(){return this.C.properties},e.prototype.getEvent=function(){return this.C},e}();t.default=o},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});!function(e){e[e.Unknown=0]="Unknown",e[e.MSACID=1]="MSACID",e[e.MSAPUID=2]="MSAPUID",e[e.ANID=3]="ANID",e[e.OrgIdCID=4]="OrgIdCID",e[e.OrgIdPUID=5]="OrgIdPUID",e[e.UserObjectId=6]="UserObjectId",e[e.Skype=7]="Skype",e[e.Yammer=8]="Yammer",e[e.EmailAddress=9]="EmailAddress",e[e.PhoneNumber=10]="PhoneNumber",e[e.SipAddress=11]="SipAddress",e[e.MUID=12]="MUID"}(t.AWTUserIdType||(t.AWTUserIdType={}));!function(e){e[e.Started=0]="Started",e[e.Ended=1]="Ended"}(t.AWTSessionState||(t.AWTSessionState={}))},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(1),r="MicrosoftApplicationsTelemetryDeviceId",o="MicrosoftApplicationsTelemetryFirstLaunchTime",s={MSIE:"MSIE",CHROME:"Chrome",FIREFOX:"Firefox",SAFARI:"Safari",EDGE:"Edge",ELECTRON:"Electron",SKYPE_SHELL:"SkypeShell",PHANTOMJS:"PhantomJS",OPERA:"Opera"},a={WINDOWS:"Windows",MACOSX:"Mac OS X",WINDOWS_PHONE:"Windows Phone",WINDOWS_RT:"Windows RT",IOS:"iOS",ANDROID:"Android",LINUX:"Linux",CROS:"Chrome OS",UNKNOWN:"Unknown"},u={WIN:/(windows|win32)/i,WINRT:/ arm;/i,WINPHONE:/windows\sphone\s\d+\.\d+/i,OSX:/(macintosh|mac os x)/i,IOS:/(iPad|iPhone|iPod)(?=.*like Mac OS X)/i,LINUX:/(linux|joli|[kxln]?ubuntu|debian|[open]*suse|gentoo|arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk)/i,ANDROID:/android/i,CROS:/CrOS/i},d={5.1:"XP","6.0":"Vista",6.1:"7",6.2:"8",6.3:"8.1","10.0":"10"},c=function(){function e(){}return e.addPropertyStorageOverride=function(e){return!!e&&(this.b=e,!0)},e.autoCollect=function(e,t,i){if(this.R=e,this.D=t,this.O(),i||"undefined"==typeof navigator||(i=navigator.userAgent||""),this.N(i),this.D&&!this.b)return this.M(r),void this.M(o);(this.b||this.k&&!this.D)&&this.U()},e.checkAndSaveDeviceId=function(e){if(e){var t=this.x(r),i=this.x(o);t!==e&&(i=n.getISOString(new Date)),this.L(r,e),this.L(o,i),this.F(i)}},e.U=function(){var e=this.x(r);e||(e=n.newGuid()),this.R.setDeviceId(e)},e.O=function(){"undefined"!=typeof document&&document.documentElement&&this.R.setAppLanguage(document.documentElement.lang),"undefined"!=typeof navigator&&this.R.setUserLanguage(navigator.userLanguage||navigator.language);var e=(new Date).getTimezoneOffset(),t=e%60,i=(e-t)/60,n="+";i>0&&(n="-"),i=Math.abs(i),t=Math.abs(t),this.R.setUserTimeZone(n+(i<10?"0"+i:i.toString())+":"+(t<10?"0"+t:t.toString()))},e.N=function(e){if(e){var t=this.q(e);this.R.setDeviceBrowserName(t),this.R.setDeviceBrowserVersion(this.H(e,t));var i=this.Q(e);this.R.setDeviceOsName(i),this.R.setDeviceOsVersion(this.j(e,i))}},e.q=function(e){return this.z("OPR/",e)?s.OPERA:this.z(s.PHANTOMJS,e)?s.PHANTOMJS:this.z(s.EDGE,e)?s.EDGE:this.z(s.ELECTRON,e)?s.ELECTRON:this.z(s.CHROME,e)?s.CHROME:this.z("Trident",e)?s.MSIE:this.z(s.FIREFOX,e)?s.FIREFOX:this.z(s.SAFARI,e)?s.SAFARI:this.z(s.SKYPE_SHELL,e)?s.SKYPE_SHELL:"Unknown"},e.F=function(e){if(!isNaN(e)){var t=new Date;t.setTime(parseInt(e,10)),e=n.getISOString(t)}this.firstLaunchTime=e},e.z=function(e,t){return t.indexOf(e)>-1},e.H=function(e,t){return t===s.MSIE?this.K(e):this.G(t,e)},e.K=function(e){var t=e.match(new RegExp(s.MSIE+" ([\\d,.]+)"));if(t)return t[1];var i=e.match(new RegExp("rv:([\\d,.]+)"));return i?i[1]:void 0},e.G=function(e,t){e===s.SAFARI&&(e="Version");var i=t.match(new RegExp(e+"/([\\d,.]+)"));return i?i[1]:"Unknown"},e.Q=function(e){return e.match(u.WINPHONE)?a.WINDOWS_PHONE:e.match(u.WINRT)?a.WINDOWS_RT:e.match(u.IOS)?a.IOS:e.match(u.ANDROID)?a.ANDROID:e.match(u.LINUX)?a.LINUX:e.match(u.OSX)?a.MACOSX:e.match(u.WIN)?a.WINDOWS:e.match(u.CROS)?a.CROS:"Unknown"},e.j=function(e,t){return t===a.WINDOWS?this.V(e,"Windows NT"):t===a.ANDROID?this.V(e,t):t===a.MACOSX?this.X(e):"Unknown"},e.V=function(e,t){var i=e.match(new RegExp(t+" ([\\d,.]+)"));return i?d[i[1]]?d[i[1]]:i[1]:"Unknown"},e.X=function(e){var t=e.match(new RegExp(a.MACOSX+" ([\\d,_,.]+)"));if(t){var i=t[1].replace(/_/g,".");if(i){var n=this.Z(i);if(n){return i.split(n)[0]}return i}}return"Unknown"},e.Z=function(e){return e.indexOf(".")>-1?".":e.indexOf("_")>-1?"_":null},e.L=function(e,t){if(this.b)this.b.setProperty(e,t);else if(this.k){var i=new Date;i.setTime(i.getTime()+31536e6);var n="expires="+i.toUTCString();document.cookie=e+"="+t+"; "+n}},e.x=function(e){if(this.b)return this.b.getProperty(e)||"";if(this.k){e+="=";for(var t=document.cookie.split(";"),i=0;i<t.length;i++){for(var n=t[i],r=0;" "===n.charAt(r);)r++;if(n=n.substring(r),0===n.indexOf(e))return n.substring(e.length,n.length)}}return""},e.M=function(e){this.k&&(document.cookie=e+"=;expires=Thu, 01 Jan 1970 00:00:01 GMT;")},e.D=!1,e.k="undefined"!=typeof document&&void 0!==document.cookie,e}();t.default=c},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(7),r=i(0),o=i(6),s=function(){function e(e,t){this.J=e,this.Y=t}return e.prototype.setAppId=function(e){this.$("AppInfo.Id",e)},e.prototype.setAppVersion=function(e){this.$("AppInfo.Version",e)},e.prototype.setAppLanguage=function(e){this.$("AppInfo.Language",e)},e.prototype.setDeviceId=function(e){this.J&&(n.default.checkAndSaveDeviceId(e),this.$("DeviceInfo.Id",e))},e.prototype.setDeviceOsName=function(e){this.J&&this.$("DeviceInfo.OsName",e)},e.prototype.setDeviceOsVersion=function(e){this.J&&this.$("DeviceInfo.OsVersion",e)},e.prototype.setDeviceBrowserName=function(e){this.J&&this.$("DeviceInfo.BrowserName",e)},e.prototype.setDeviceBrowserVersion=function(e){this.J&&this.$("DeviceInfo.BrowserVersion",e)},e.prototype.setDeviceMake=function(e){this.J&&this.$("DeviceInfo.Make",e)},e.prototype.setDeviceModel=function(e){this.J&&this.$("DeviceInfo.Model",e)},e.prototype.setUserId=function(e,t,i){if(!isNaN(i)&&null!==i&&i>=0&&i<=12)this.$("UserInfo.IdType",i.toString());else{var n=void 0;switch(t){case r.AWTPiiKind.SipAddress:n=o.AWTUserIdType.SipAddress;break;case r.AWTPiiKind.PhoneNumber:n=o.AWTUserIdType.PhoneNumber;break;case r.AWTPiiKind.SmtpAddress:n=o.AWTUserIdType.EmailAddress;break;default:n=o.AWTUserIdType.Unknown}this.$("UserInfo.IdType",n.toString())}if(isNaN(t)||null===t||t===r.AWTPiiKind.NotSet||t>13)switch(i){case o.AWTUserIdType.Skype:t=r.AWTPiiKind.Identity;break;case o.AWTUserIdType.EmailAddress:t=r.AWTPiiKind.SmtpAddress;break;case o.AWTUserIdType.PhoneNumber:t=r.AWTPiiKind.PhoneNumber;break;case o.AWTUserIdType.SipAddress:t=r.AWTPiiKind.SipAddress;break;default:t=r.AWTPiiKind.NotSet}this.ee("UserInfo.Id",e,t)},e.prototype.setUserAdvertisingId=function(e){this.$("UserInfo.AdvertisingId",e)},e.prototype.setUserTimeZone=function(e){this.$("UserInfo.TimeZone",e)},e.prototype.setUserLanguage=function(e){this.$("UserInfo.Language",e)},e.prototype.$=function(e,t){"string"==typeof t&&this.Y.setProperty(e,t)},e.prototype.ee=function(e,t,i){"string"==typeof t&&this.Y.setPropertyWithPii(e,t,i)},e}();t.default=s},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(21),r=i(0),o=i(2),s=i(1),a=function(){function e(){}return e.getPayloadBlob=function(e,t){var i,a=!1,u=new n.IO.MemoryStream,d=new n.CompactBinaryProtocolWriter(u);d.te(n.ne.ie,3,null),d.re(t,n.ne.oe,n.ne.se);for(var c in e)if(a)i||(i={}),i[c]=e[c],delete e[c];else if(e.hasOwnProperty(c)){d.ae(c);var _=e[c];d.ue(1,n.ne.de),d.te(n.ne.oe,2,null),d.ae("act_default_source"),d.te(n.ne.oe,5,null),d.ae(s.newGuid()),d.te(n.ne.ce,6,null),d._e(s.numberToBondInt64(Date.now())),d.te(n.ne.se,8,null);var l=u.le().length+1;d.ue(e[c].length,n.ne.de);for(var p=u.le().length-l,f=0;f<_.length;++f){var h=u.le().length;if(this.writeEvent(_[f],d),u.le().length-h>2936012)o.default.eventsRejected([_[f]],r.AWTEventsRejectedReason.SizeLimitExceeded),_.splice(f--,1),u.le().splice(h),this.pe(_.length,u,p,l);else if(u.le().length>2936012){u.le().splice(h),i||(i={}),e[c]=_.splice(0,f),i[c]=_,this.pe(e[c].length,u,p,l),a=!0;break}}d.fe(!1)}return d.fe(!1),{payloadBlob:u.le(),remainingRequest:i}},e.pe=function(e,t,i,r){for(var o=n.ve.he(n.Number.w(e)),s=0;s<i;++s){if(!(s<o.length)){t.le().slice(r+s,i-s);break}t.le()[r+s]=o[s]}},e.writeEvent=function(e,t){t.te(n.ne.oe,1,null),t.ae(e.id),t.te(n.ne.ce,3,null),t._e(s.numberToBondInt64(e.timestamp)),t.te(n.ne.oe,5,null),t.ae(e.type),t.te(n.ne.oe,6,null),t.ae(e.name);var i={},o=0,a={},u=0,d={},c=0,_={},l=0,p={},f=0,h={},v=0,y={},T=0;for(var g in e.properties)if(e.properties.hasOwnProperty(g)){var m=e.properties[g];if(m.cc>0)y[g]=m,T++;else if(m.pii>0)h[g]=m,v++;else switch(m.type){case r.AWTPropertyType.String:i[g]=m.value,o++;break;case r.AWTPropertyType.Int64:a[g]=m.value,u++;break;case r.AWTPropertyType.Double:d[g]=m.value,c++;break;case r.AWTPropertyType.Boolean:_[g]=m.value,l++;break;case r.AWTPropertyType.Date:p[g]=m.value,f++}}if(o){t.te(n.ne.ie,13,null),t.re(o,n.ne.oe,n.ne.oe);for(var g in i)if(i.hasOwnProperty(g)){var S=i[g];t.ae(g),t.ae(S.toString())}}if(v){t.te(n.ne.ie,30,null),t.re(v,n.ne.oe,n.ne.de);for(var g in h)if(h.hasOwnProperty(g)){var m=h[g];t.ae(g),t.te(n.ne.ye,1,null),t.Te(1),t.te(n.ne.ye,2,null),t.Te(m.pii),t.te(n.ne.oe,3,null),t.ae(m.value.toString()),t.fe(!1)}}if(l){t.te(n.ne.ie,31,null),t.re(l,n.ne.oe,n.ne.ge);for(var g in _)if(_.hasOwnProperty(g)){var S=_[g];t.ae(g),t.me(S)}}if(f){t.te(n.ne.ie,32,null),t.re(f,n.ne.oe,n.ne.ce);for(var g in p)if(p.hasOwnProperty(g)){var S=p[g];t.ae(g),t._e(s.numberToBondInt64(S))}}if(u){t.te(n.ne.ie,33,null),t.re(u,n.ne.oe,n.ne.ce);for(var g in a)if(a.hasOwnProperty(g)){var S=a[g];t.ae(g),t._e(s.numberToBondInt64(S))}}if(c){t.te(n.ne.ie,34,null),t.re(c,n.ne.oe,n.ne.Se);for(var g in d)if(d.hasOwnProperty(g)){var S=d[g];t.ae(g),t.Ae(S)}}if(T){t.te(n.ne.ie,36,null),t.re(T,n.ne.oe,n.ne.de);for(var g in y)if(y.hasOwnProperty(g)){var m=y[g];t.ae(g),t.te(n.ne.ye,1,null),t.Te(m.cc),t.te(n.ne.oe,2,null),t.ae(m.value.toString()),t.fe(!1)}}t.fe(!1)},e.base64Encode=function(e){return n.ve.Ie(e)},e}();t.default=a},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(1),r=i(2),o=i(0),s=function(){function e(){}return e.initialize=function(e){var t=this;this.Ee=e,this.We=!0,r.default.addNotificationListener({eventsSent:function(e){t.Pe("records_sent_count",e.length,e[0].apiKey)},eventsDropped:function(e,i){switch(i){case o.AWTEventsDroppedReason.NonRetryableStatus:t.Pe("d_send_fail",e.length,e[0].apiKey),t.Pe("records_dropped_count",e.length,e[0].apiKey);break;case o.AWTEventsDroppedReason.QueueFull:t.Pe("d_queue_full",e.length,e[0].apiKey)}},eventsRejected:function(e,i){switch(i){case o.AWTEventsRejectedReason.InvalidEvent:t.Pe("r_inv",e.length,e[0].apiKey);break;case o.AWTEventsRejectedReason.KillSwitch:t.Pe("r_kl",e.length,e[0].apiKey);break;case o.AWTEventsRejectedReason.SizeLimitExceeded:t.Pe("r_size",e.length,e[0].apiKey)}t.Pe("r_count",e.length,e[0].apiKey)},eventsRetrying:null}),setTimeout(function(){return t.flush()},6e4)},e.teardown=function(){this.We&&(this.flush(),this.We=!1)},e.eventReceived=function(t){e.Pe("records_received_count",1,t)},e.flush=function(){var e=this;if(this.We){for(var t in this.Be)this.Be.hasOwnProperty(t)&&this.Ee(this.Be[t],t);this.Be={},setTimeout(function(){return e.flush()},6e4)}},e.Pe=function(e,t,i){if(this.We&&i!==n.StatsApiKey){var r=n.getTenantId(i);this.Be[r]||(this.Be[r]={}),this.Be[r][e]?this.Be[r][e]=this.Be[r][e]+t:this.Be[r][e]=t}},e.We=!1,e.Be={},e}();t.default=s},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(0),r=i(6),o=i(12),s=i(13),a=i(3),u=i(2),d=i(7),c=function(){function e(){}return e.initialize=function(e,t){if(void 0===t&&(t={}),!this.we)return this.we=!0,o.default.defaultTenantToken=e,this.Ce(t),this.T.disableCookiesUsage&&!this.T.propertyStorageOverride&&(o.default.sessionEnabled=!1),d.default.addPropertyStorageOverride(this.T.propertyStorageOverride),d.default.autoCollect(o.default.semanticContext,this.T.disableCookiesUsage,this.T.userAgent),a.default.initialize(this.T),o.default.loggingEnabled=!0,this.T.enableAutoUserSession&&(this.getLogger().logSession(r.AWTSessionState.Started),window.addEventListener("beforeunload",this.flushAndTeardown)),this.getLogger()},e.getSemanticContext=function(){return o.default.semanticContext},e.flush=function(e){this.we&&!this.be&&a.default.flush(e)},e.flushAndTeardown=function(){this.we&&!this.be&&(this.T.enableAutoUserSession&&this.getLogger().logSession(r.AWTSessionState.Ended),a.default.flushAndTeardown(),o.default.loggingEnabled=!1,this.be=!0)},e.pauseTransmission=function(){this.we&&!this.be&&a.default.pauseTransmission()},e.resumeTransmision=function(){this.we&&!this.be&&a.default.resumeTransmision()},e.setTransmitProfile=function(e){this.we&&!this.be&&a.default.setTransmitProfile(e)},e.loadTransmitProfiles=function(e){this.we&&!this.be&&a.default.loadTransmitProfiles(e)},e.setContext=function(e,t,i){void 0===i&&(i=n.AWTPropertyType.Unspecified),o.default.logManagerContext.setProperty(e,t,i)},e.setContextWithPii=function(e,t,i,r){void 0===r&&(r=n.AWTPropertyType.Unspecified),o.default.logManagerContext.setPropertyWithPii(e,t,i,r)},e.setContextWithCustomerContent=function(e,t,i,r){void 0===r&&(r=n.AWTPropertyType.Unspecified),o.default.logManagerContext.setPropertyWithCustomerContent(e,t,i,r)},e.getLogger=function(e){var t=e;return t&&t!==o.default.defaultTenantToken||(t=""),this.Re[t]||(this.Re[t]=new s.default(t)),this.Re[t]},e.addNotificationListener=function(e){u.default.addNotificationListener(e)},e.removeNotificationListener=function(e){u.default.removeNotificationListener(e)},e.Ce=function(e){e.collectorUri&&(this.T.collectorUri=e.collectorUri),e.cacheMemorySizeLimitInNumberOfEvents>0&&(this.T.cacheMemorySizeLimitInNumberOfEvents=e.cacheMemorySizeLimitInNumberOfEvents),e.httpXHROverride&&e.httpXHROverride.sendPOST&&(this.T.httpXHROverride=e.httpXHROverride),e.propertyStorageOverride&&e.propertyStorageOverride.getProperty&&e.propertyStorageOverride.setProperty&&(this.T.propertyStorageOverride=e.propertyStorageOverride),e.userAgent&&(this.T.userAgent=e.userAgent),e.disableCookiesUsage&&(this.T.disableCookiesUsage=e.disableCookiesUsage),e.canSendStatEvent&&(this.T.canSendStatEvent=e.canSendStatEvent),e.enableAutoUserSession&&"undefined"!=typeof window&&window.addEventListener&&(this.T.enableAutoUserSession=e.enableAutoUserSession),e.clockSkewRefreshDurationInMins>0&&(this.T.clockSkewRefreshDurationInMins=e.clockSkewRefreshDurationInMins)},e.Re={},e.we=!1,e.be=!1,e.T={collectorUri:"https://browser.pipe.aria.microsoft.com/Collector/3.0/",cacheMemorySizeLimitInNumberOfEvents:1e4,disableCookiesUsage:!1,canSendStatEvent:function(e){return!0},clockSkewRefreshDurationInMins:0},e}();t.default=c},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(5),r=i(8),o=function(){function e(){}return e.logManagerContext=new n.default,e.sessionEnabled=!0,e.loggingEnabled=!1,e.defaultTenantToken="",e.semanticContext=new r.default(!0,e.logManagerContext),e}();t.default=o},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(0),r=i(6),o=i(5),s=i(1),a=i(10),u=i(2),d=i(3),c=i(12),_=i(15),l=i(8),p=i(7),f=function(){function e(e){this.De=e,this.Oe=new o.default,this.R=new l.default(!1,this.Oe),this.Ne=0,this.Me()}return e.prototype.setContext=function(e,t,i){void 0===i&&(i=n.AWTPropertyType.Unspecified),this.Oe.setProperty(e,t,i)},e.prototype.setContextWithPii=function(e,t,i,r){void 0===r&&(r=n.AWTPropertyType.Unspecified),this.Oe.setPropertyWithPii(e,t,i,r)},e.prototype.setContextWithCustomerContent=function(e,t,i,r){void 0===r&&(r=n.AWTPropertyType.Unspecified),this.Oe.setPropertyWithCustomerContent(e,t,i,r)},e.prototype.getSemanticContext=function(){return this.R},e.prototype.logEvent=function(t){if(c.default.loggingEnabled){this.De||(this.De=c.default.defaultTenantToken,this.Me());var i=!0;s.isString(t)?t={name:t}:t instanceof o.default&&(t=t.getEvent(),i=!1),a.default.eventReceived(this.De),e.ke(e.Ue(t,this.De,i),this.Oe)}},e.prototype.logSession=function(t,i){if(c.default.sessionEnabled){var o={name:"session",type:"session",properties:{}};if(e.xe(o,i),o.priority=n.AWTEventPriority.High,t===r.AWTSessionState.Started){if(this.Ne>0)return;this.Ne=(new Date).getTime(),this.Le=s.newGuid(),this.setContext("Session.Id",this.Le),o.properties["Session.State"]="Started"}else{if(t!==r.AWTSessionState.Ended)return;if(0===this.Ne)return;var a=Math.floor(((new Date).getTime()-this.Ne)/1e3);o.properties["Session.Id"]=this.Le,o.properties["Session.State"]="Ended",o.properties["Session.Duration"]=a.toString(),o.properties["Session.DurationBucket"]=e.Fe(a),this.Ne=0,this.setContext("Session.Id",null),this.Le=void 0}o.properties["Session.FirstLaunchTime"]=p.default.firstLaunchTime,this.logEvent(o)}},e.prototype.getSessionId=function(){return this.Le},e.prototype.logFailure=function(t,i,r,o,s){if(t&&i){var a={name:"failure",type:"failure",properties:{}};e.xe(a,s),a.properties["Failure.Signature"]=t,a.properties["Failure.Detail"]=i,r&&(a.properties["Failure.Category"]=r),o&&(a.properties["Failure.Id"]=o),a.priority=n.AWTEventPriority.High,this.logEvent(a)}},e.prototype.logPageView=function(t,i,n,r,o,s){if(t&&i){var a={name:"pageview",type:"pageview",properties:{}};e.xe(a,s),a.properties["PageView.Id"]=t,a.properties["PageView.Name"]=i,n&&(a.properties["PageView.Category"]=n),r&&(a.properties["PageView.Uri"]=r),o&&(a.properties["PageView.ReferrerUri"]=o),this.logEvent(a)}},e.prototype.Me=function(){!e.qe[this.De]&&this.De&&(e.qe[this.De]=s.newGuid())},e.xe=function(e,t){if(t){t instanceof o.default&&(t=t.getEvent()),t.name&&(e.name=t.name),t.priority&&(e.priority=t.priority);for(var i in t.properties)t.properties.hasOwnProperty(i)&&(e.properties[i]=t.properties[i])}},e.Fe=function(e){return e<0?"Undefined":e<=3?"UpTo3Sec":e<=10?"UpTo10Sec":e<=30?"UpTo30Sec":e<=60?"UpTo60Sec":e<=180?"UpTo3Min":e<=600?"UpTo10Min":e<=1800?"UpTo30Min":"Above30Min"},e.ke=function(e,t){return e.name&&s.isString(e.name)?(e.name=e.name.toLowerCase(),e.name=e.name.replace(s.EventNameDotRegex,"_"),e.type&&s.isString(e.type)?e.type=e.type.toLowerCase():e.type="custom",s.EventNameAndTypeRegex.test(e.name)&&s.EventNameAndTypeRegex.test(e.type)?((!s.isNumber(e.timestamp)||e.timestamp<0)&&(e.timestamp=(new Date).getTime()),e.properties||(e.properties={}),this.He(e,t.getPropertyMap()),this.He(e,c.default.logManagerContext.getPropertyMap()),this.Qe(e,"EventInfo.InitId",this.je(e.apiKey)),this.Qe(e,"EventInfo.Sequence",this.ze(e.apiKey)),this.Qe(e,"EventInfo.SdkVersion",_.FullVersionString),this.Qe(e,"EventInfo.Name",e.name),this.Qe(e,"EventInfo.Time",new Date(e.timestamp).toISOString()),s.isPriority(e.priority)||(e.priority=n.AWTEventPriority.Normal),void this.Ke(e)):void u.default.eventsRejected([e],n.AWTEventsRejectedReason.InvalidEvent)):void u.default.eventsRejected([e],n.AWTEventsRejectedReason.InvalidEvent)},e.He=function(e,t){if(t)for(var i in t)t.hasOwnProperty(i)&&(e.properties[i]||(e.properties[i]=t[i]))},e.Qe=function(e,t,i){e.properties[t]={value:i,pii:n.AWTPiiKind.NotSet,type:n.AWTPropertyType.String}},e.Ke=function(e){d.default.sendEvent(e)},e.Ue=function(e,t,i){if(e.properties=e.properties||{},i)for(var n in e.properties)e.properties.hasOwnProperty(n)&&(e.properties[n]=s.sanitizeProperty(n,e.properties[n]),null===e.properties[n]&&delete e.properties[n]);var r=e;return r.id=s.newGuid(),r.apiKey=t,r},e.je=function(t){return e.qe[t]},e.ze=function(t){return void 0===e.Ge[t]&&(e.Ge[t]=0),(++e.Ge[t]).toString()},e.Ge={},e.qe={},e}();t.default=f},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AWT_REAL_TIME="REAL_TIME",t.AWT_NEAR_REAL_TIME="NEAR_REAL_TIME",t.AWT_BEST_EFFORT="BEST_EFFORT"},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Version="1.8.3",t.FullVersionString="AWT-Web-JS-"+t.Version},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(0);t.AWTPropertyType=n.AWTPropertyType,t.AWTPiiKind=n.AWTPiiKind,t.AWTEventPriority=n.AWTEventPriority,t.AWTEventsDroppedReason=n.AWTEventsDroppedReason,t.AWTEventsRejectedReason=n.AWTEventsRejectedReason,t.AWTCustomerContentKind=n.AWTCustomerContentKind;var r=i(6);t.AWTUserIdType=r.AWTUserIdType,t.AWTSessionState=r.AWTSessionState;var o=i(14);t.AWT_BEST_EFFORT=o.AWT_BEST_EFFORT,t.AWT_NEAR_REAL_TIME=o.AWT_NEAR_REAL_TIME,t.AWT_REAL_TIME=o.AWT_REAL_TIME;var s=i(5);t.AWTEventProperties=s.default;var a=i(13);t.AWTLogger=a.default;var u=i(11);t.AWTLogManager=u.default;var d=i(29);t.AWTTransmissionManager=d.default;var c=i(9);t.AWTSerializer=c.default;var _=i(8);t.AWTSemanticContext=_.default,t.AWT_COLLECTOR_URL_UNITED_STATES="https://us.pipe.aria.microsoft.com/Collector/3.0/",t.AWT_COLLECTOR_URL_GERMANY="https://de.pipe.aria.microsoft.com/Collector/3.0/",t.AWT_COLLECTOR_URL_JAPAN="https://jp.pipe.aria.microsoft.com/Collector/3.0/",t.AWT_COLLECTOR_URL_AUSTRALIA="https://au.pipe.aria.microsoft.com/Collector/3.0/",t.AWT_COLLECTOR_URL_EUROPE="https://eu.pipe.aria.microsoft.com/Collector/3.0/",t.AWT_COLLECTOR_URL_USGOV_DOD="https://pf.pipe.aria.microsoft.com/Collector/3.0",t.AWT_COLLECTOR_URL_USGOV_DOJ="https://tb.pipe.aria.microsoft.com/Collector/3.0"},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});!function(e){e[e.Ve=0]="_BT_STOP",e[e.Xe=1]="_BT_STOP_BASE",e[e.ge=2]="_BT_BOOL",e[e.Se=8]="_BT_DOUBLE",e[e.oe=9]="_BT_STRING",e[e.de=10]="_BT_STRUCT",e[e.se=11]="_BT_LIST",e[e.ie=13]="_BT_MAP",e[e.ye=16]="_BT_INT32",e[e.ce=17]="_BT_INT64"}(t.ne||(t.ne={}))},function(e,t,i){"use strict";function n(e){for(var t=[],i=0;i<e.length;++i){var n=e.charCodeAt(i);n<128?t.push(n):n<2048?t.push(192|n>>6,128|63&n):n<55296||n>=57344?t.push(224|n>>12,128|n>>6&63,128|63&n):(n=65536+((1023&n)<<10|1023&e.charCodeAt(++i)),t.push(240|n>>18,128|n>>12&63,128|n>>6&63,128|63&n))}return t}function r(e){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=[],n=e.length%3,r=0,o=e.length-n;r<o;r+=3){var s=(e[r]<<16)+(e[r+1]<<8)+e[r+2];i.push(function(e){return[t.charAt(e>>18&63),t.charAt(e>>12&63),t.charAt(e>>6&63),t.charAt(63&e)].join("")}(s))}switch(n){case 1:var s=e[e.length-1];i.push(t.charAt(s>>2)),i.push(t.charAt(s<<4&63)),i.push("==");break;case 2:var a=(e[e.length-2]<<8)+e[e.length-1];i.push(t.charAt(a>>10)),i.push(t.charAt(a>>4&63)),i.push(t.charAt(a<<2&63)),i.push("=")}return i.join("")}function o(e){for(var t=[];4294967168&e;)t.push(127&e|128),e>>>=7;return t.push(127&e),t}function s(e){for(var t=e.low,i=e.high,n=[];i||4294967168&t;)n.push(127&t|128),t=(127&i)<<25|t>>>7,i>>>=7;return n.push(127&t),n}function a(e){if(l.BrowserChecker.Ze()){var t=new DataView(new ArrayBuffer(8));t.setFloat64(0,e,!0);for(var i=[],n=0;n<8;++n)i.push(t.getUint8(n));return i}return _.FloatUtils.Je(e,!0)}function u(e){return(e=c.Number.B(e))<<1^e>>31}function d(e){var t=e.low,i=e.high,n=i<<1|t>>>31,r=t<<1;2147483648&i&&(n=~n,r=~r);var o=new c.UInt64("0");return o.low=r,o.high=n,o}Object.defineProperty(t,"__esModule",{value:!0});var c=i(4),_=i(19),l=i(22);t.Ye=n,t.Ie=r,t.he=o,t.$e=s,t.et=a,t.tt=u,t.it=d},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){}return e.Je=function(e,t){if(!e)return t?this.nt:this.rt;var i=t?11:8,n=t?52:23,r=(1<<i-1)-1,o=1-r,s=r,a=e<0?1:0;e=Math.abs(e);for(var u=Math.floor(e),d=e-u,c=2*(r+2)+n,_=new Array(c),l=0;l<c;)_[l++]=0;for(l=r+2;l&&u;)_[--l]=u%2,u=Math.floor(u/2);for(l=r+1;l<c-1&&d>0;)d*=2,d>=1?(_[++l]=1,--d):_[++l]=0;for(var p=0;p<c&&!_[p];)p++;var f=r+1-p,h=p+n;if(_[h+1]){for(l=h;l>p&&(_[l]=1-_[l],!_);--l);l===p&&++f}if(f>s||u)return a?t?this.ot:this.st:t?this.at:this.ut;if(f<o)return t?this.nt:this.rt;if(t){var v=0;for(l=0;l<20;++l)v=v<<1|_[++p];for(var y=0;l<52;++l)y=y<<1|_[++p];v|=f+r<<20,v=a<<31|2147483647&v;var T=[255&y,y>>8&255,y>>16&255,y>>>24,255&v,v>>8&255,v>>16&255,v>>>24];return T}var g=0;for(l=0;l<23;++l)g=g<<1|_[++p];g|=f+r<<23,g=a<<31|2147483647&g;var T=[255&g,g>>8&255,g>>16&255,g>>>24];return T},e.rt=[0,0,0,0],e.nt=[0,0,0,0,0,0,0,0],e.ut=[0,0,128,127],e.st=[0,0,128,255],e.at=[0,0,0,0,0,0,240,127],e.ot=[0,0,0,0,0,0,240,255],e}();t.FloatUtils=n},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(4),r=function(){function e(){this.dt=[]}return e.prototype.ct=function(e){this.dt.push(n.Number.W(e))},e.prototype._t=function(e,t,i){for(;i--;)this.ct(e[t++])},e.prototype.le=function(){return this.dt},e}();t.MemoryStream=r},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(17);t.ne=n.ne;var r=i(18);t.ve=r;var o=i(20);t.IO=o;var s=i(4);t.Int64=s.Int64,t.UInt64=s.UInt64,t.Number=s.Number;var a=function(){function e(e){this.lt=e}return e.prototype.pt=function(e){this.lt._t(e,0,e.length)},e.prototype.me=function(e){this.lt.ct(e?1:0)},e.prototype.ue=function(e,t){this.ft(t),this.ht(e)},e.prototype.re=function(e,t,i){this.ft(t),this.ft(i),this.ht(e)},e.prototype.Ae=function(e){var t=r.et(e);this.lt._t(t,0,t.length)},e.prototype.te=function(e,t,i){t<=5?this.lt.ct(e|t<<5):t<=255?(this.lt.ct(192|e),this.lt.ct(t)):(this.lt.ct(224|e),this.lt.ct(t),this.lt.ct(t>>8))},e.prototype.Te=function(e){e=r.tt(e),this.ht(e)},e.prototype._e=function(e){this.vt(r.it(e))},e.prototype.ae=function(e){if(""===e)this.ht(0);else{var t=r.Ye(e);this.ht(t.length),this.lt._t(t,0,t.length)}},e.prototype.fe=function(e){this.ft(e?n.ne.Xe:n.ne.Ve)},e.prototype.ht=function(e){var t=r.he(s.Number.w(e));this.lt._t(t,0,t.length)},e.prototype.vt=function(e){var t=r.$e(e);this.lt._t(t,0,t.length)},e.prototype.ft=function(e){this.lt.ct(s.Number.P(e))},e}();t.CompactBinaryProtocolWriter=a},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){}return e.Ze=function(){return"undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView},e}();t.BrowserChecker=n},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e){this.clockSkewRefreshDurationInMins=e,this.yt()}return e.prototype.allowRequestSending=function(){return this.Tt&&!this.gt?(this.Tt=!1,this.mt=!1,!0):this.mt},e.prototype.shouldAddClockSkewHeaders=function(){return this.St},e.prototype.getClockSkewHeaderValue=function(){return this.At},e.prototype.setClockSkew=function(e){this.gt||(e?this.At=e:this.St=!1,this.gt=!0,this.mt=!0)},e.prototype.yt=function(){var e=this;this.Tt=!0,this.gt=!1,this.mt=!0,this.St=!0,this.At="use-collector-delta",this.clockSkewRefreshDurationInMins>0&&setTimeout(function(){return e.yt()},6e4*this.clockSkewRefreshDurationInMins)},e}();t.default=n},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){this.It={}}return e.prototype.setKillSwitchTenants=function(e,t){if(e&&t)try{var i=e.split(",");if("this-request-only"===t)return i;for(var n=1e3*parseInt(t,10),r=0;r<i.length;++r)this.It[i[r]]=Date.now()+n}catch(e){return[]}return[]},e.prototype.isTenantKilled=function(e){return void 0!==this.It[e]&&this.It[e]>Date.now()||(delete this.It[e],!1)},e}();t.default=n},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(0),r=function(){function e(e,t){this.Et=e,this.Wt=t,this.Pt={},this.Bt=0}return e.prototype.addEventToBatch=function(e){if(e.priority===n.AWTEventPriority.Immediate_sync){var t={};return t[e.apiKey]=[e],t}return this.Bt>=this.Wt&&this.flushBatch(),void 0===this.Pt[e.apiKey]&&(this.Pt[e.apiKey]=[]),this.Pt[e.apiKey].push(e),this.Bt++,null},e.prototype.flushBatch=function(){this.Bt>0&&(this.Et.push(this.Pt),this.Pt={},this.Bt=0)},e.prototype.hasBatch=function(){return this.Bt>0},e}();t.default=r},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){}return e.shouldRetryForStatus=function(e){return!(e>=300&&e<500&&408!==e||501===e||505===e)},e.getMillisToBackoffForRetry=function(e){var t=0,i=Math.floor(1200*Math.random())+2400;return t=Math.pow(4,e)*i,Math.min(t,12e4)},e}();t.default=n},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(0),r=i(9),o=i(26),s=i(24),a=i(23),u=i(15),d=i(1),c=i(2),_=i(3),l="POST",p=function(){function e(e,t,i,n,r){var o=this;this.wt=e,this.Ct=i,this.bt=n,this.Rt="?qsp=true&content-type=application%2Fbond-compact-binary&client-id=NO_AUTH&sdk-version="+u.FullVersionString,this.Dt=new s.default,this._=!1,this.Ot=!1,this.Nt=0,this.Mt=new a.default(r),d.isUint8ArrayAvailable()||(this.Rt+="&content-encoding=base64"),this.Rt=t+this.Rt,this.bt||(this.Ot=!d.isReactNative(),this.bt={sendPOST:function(e,t,i,n,r,s){try{if(d.useXDomainRequest()){var a=new XDomainRequest;a.open(l,e),a.onload=function(){r(200,null)},a.onerror=function(){n(400,null)},a.ontimeout=function(){i(500,null)},a.send(t)}else if(d.isReactNative())fetch(e,{body:t,method:l}).then(function(e){var t={};e.headers&&e.headers.forEach(function(e,i){t[i]=e}),r(e.status,t)}).catch(function(e){n(0,{})});else{var u=new XMLHttpRequest;u.open(l,e,!s),u.onload=function(){r(u.status,o.kt(u.getAllResponseHeaders()))},u.onerror=function(){n(u.status,o.kt(u.getAllResponseHeaders()))},u.ontimeout=function(){i(u.status,o.kt(u.getAllResponseHeaders()))},u.send(t)}}catch(e){n(400,null)}}})}return e.prototype.hasIdleConnection=function(){return this.Nt<2},e.prototype.sendQueuedRequests=function(){for(;this.hasIdleConnection()&&!this._&&this.wt.length>0&&this.Mt.allowRequestSending();)this.Nt++,this.Ut(this.wt.shift(),0,!1);this.hasIdleConnection()&&_.default.scheduleTimer()},e.prototype.isCompletelyIdle=function(){return 0===this.Nt},e.prototype.teardown=function(){for(;this.wt.length>0;)this.Ut(this.wt.shift(),0,!0)},e.prototype.pause=function(){this._=!0},e.prototype.resume=function(){this._=!1,this.sendQueuedRequests()},e.prototype.removeQueuedRequests=function(){this.wt.length=0},e.prototype.sendSynchronousRequest=function(e,t){this._&&(e[t][0].priority=n.AWTEventPriority.High),this.Nt++,this.Ut(e,0,!1,!0)},e.prototype.Ut=function(e,t,i,o){var s=this;void 0===o&&(o=!1);try{if(this._)return this.Nt--,void this.Ct.addBackRequest(e);var a=0,u="";for(var _ in e)e.hasOwnProperty(_)&&(this.Dt.isTenantKilled(_)?(c.default.eventsRejected(e[_],n.AWTEventsRejectedReason.KillSwitch),delete e[_]):(u.length>0&&(u+=","),u+=_,a++));if(a>0){var l=r.default.getPayloadBlob(e,a);l.remainingRequest&&this.wt.push(l.remainingRequest);var p=this.Rt+"&x-apikey="+u+"&client-time-epoch-millis="+Date.now().toString();this.Mt.shouldAddClockSkewHeaders()&&(p=p+"&time-delta-to-apply-millis="+this.Mt.getClockSkewHeaderValue());var f=void 0;f=d.isUint8ArrayAvailable()?new Uint8Array(l.payloadBlob):r.default.base64Encode(l.payloadBlob);for(var _ in e)if(e.hasOwnProperty(_))for(var h=0;h<e[_].length;++h)e[_][h].sendAttempt>0?e[_][h].sendAttempt++:e[_][h].sendAttempt=1;if(this.Ot&&i&&d.isBeaconsSupported()&&navigator.sendBeacon(p,f))return;this.bt.sendPOST(p,f,function(n,r){s.xt(n,r,e,a,u,t,i,o)},function(n,r){s.xt(n,r,e,a,u,t,i,o)},function(n,r){s.xt(n,r,e,a,u,t,i,o)},i||o)}else i||this.Lt(!1,{},i,o)}catch(e){this.Lt(!1,{},i,o)}},e.prototype.xt=function(e,t,i,r,s,a,u,d){var l=this,p=!0;if(void 0!==e){if(t){var f=this.Dt.setKillSwitchTenants(t["kill-tokens"],t["kill-duration-seconds"]);this.Mt.setClockSkew(t["time-delta-millis"]);for(var h=0;h<f.length;++h)c.default.eventsRejected(i[f[h]],n.AWTEventsRejectedReason.KillSwitch),delete i[f[h]],r--}else this.Mt.setClockSkew(null);if(200===e)return void this.Lt(!0,i,u,d);(!o.default.shouldRetryForStatus(e)||r<=0)&&(p=!1)}if(p)if(d)this.Nt--,i[s][0].priority=n.AWTEventPriority.High,this.Ct.addBackRequest(i);else if(a<1){for(var v in i)i.hasOwnProperty(v)&&c.default.eventsRetrying(i[v]);setTimeout(function(){return l.Ut(i,a+1,!1)},o.default.getMillisToBackoffForRetry(a))}else this.Nt--,_.default.backOffTransmission(),this.Ct.addBackRequest(i);else this.Lt(!1,i,u,d)},e.prototype.Lt=function(e,t,i,r){e&&_.default.clearBackOff();for(var o in t)t.hasOwnProperty(o)&&(e?c.default.eventsSent(t[o]):c.default.eventsDropped(t[o],n.AWTEventsDroppedReason.NonRetryableStatus));this.Nt--,r||i||this.sendQueuedRequests()},e.prototype.kt=function(e){var t={};if(e)for(var i=e.split("\n"),n=0;n<i.length;++n){var r=i[n].split(": ");t[r[0]]=r[1]}return t},e}();t.default=p},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(0),r=i(27),o=i(3),s=i(25),a=i(2),u=i(1),d=500,c=function(){function e(e,t,i,o){this.Ft=t,this.qt=!1,this.Ht=[],this.Qt=!1,this._=!1,this.jt=0,this.Et=[],this.zt={},this.zt[n.AWTEventPriority.High]=[],this.zt[n.AWTEventPriority.Normal]=[],this.zt[n.AWTEventPriority.Low]=[],this.Kt(),this.Gt=new s.default(this.Et,d),this.Vt=new r.default(this.Et,e,this,i,o)}return e.prototype.addEvent=function(e){u.isPriority(e.priority)||(e.priority=n.AWTEventPriority.Normal),e.priority===n.AWTEventPriority.Immediate_sync?this.Vt.sendSynchronousRequest(this.Gt.addEventToBatch(e),e.apiKey):this.jt<this.Ft?this.Xt(e):this.Zt(e.priority)?this.Xt(e):a.default.eventsDropped([e],n.AWTEventsDroppedReason.QueueFull)},e.prototype.sendEventsForPriorityAndAbove=function(e){this.Jt(e),this.Vt.sendQueuedRequests()},e.prototype.hasEvents=function(){return(this.zt[n.AWTEventPriority.High][0].length>0||this.zt[n.AWTEventPriority.Normal][0].length>0||this.zt[n.AWTEventPriority.Low][0].length>0||this.Gt.hasBatch())&&this.Vt.hasIdleConnection()},e.prototype.addBackRequest=function(e){if(!this._||!this.Qt){for(var t in e)if(e.hasOwnProperty(t))for(var i=0;i<e[t].length;++i)e[t][i].sendAttempt<6?this.addEvent(e[t][i]):a.default.eventsDropped([e[t][i]],n.AWTEventsDroppedReason.NonRetryableStatus);o.default.scheduleTimer()}},e.prototype.teardown=function(){this._||(this.Jt(n.AWTEventPriority.Low),this.Vt.teardown())},e.prototype.uploadNow=function(e){var t=this;this.Kt(),this.qt?this.Ht.push(e):(this.qt=!0,setTimeout(function(){return t.Yt(e)},0))},e.prototype.pauseTransmission=function(){this._=!0,this.Vt.pause(),this.shouldDropEventsOnPause&&(this.jt-=this.zt[n.AWTEventPriority.High][0].length+this.zt[n.AWTEventPriority.Normal][0].length+this.zt[n.AWTEventPriority.Low][0].length,this.zt[n.AWTEventPriority.High][0]=[],this.zt[n.AWTEventPriority.Normal][0]=[],this.zt[n.AWTEventPriority.Low][0]=[],this.Vt.removeQueuedRequests())},e.prototype.resumeTransmission=function(){this._=!1,this.Vt.resume()},e.prototype.shouldDropEventsOnPause=function(e){this.Qt=e},e.prototype.$t=function(){this.zt[n.AWTEventPriority.High].shift(),this.zt[n.AWTEventPriority.Normal].shift(),this.zt[n.AWTEventPriority.Low].shift()},e.prototype.Kt=function(){this.zt[n.AWTEventPriority.High].push([]),this.zt[n.AWTEventPriority.Normal].push([]),this.zt[n.AWTEventPriority.Low].push([])},e.prototype.Xt=function(e){this._&&this.Qt||(this.jt++,this.zt[e.priority][this.zt[e.priority].length-1].push(e))},e.prototype.Zt=function(e){for(var t=n.AWTEventPriority.Low;t<=e;){if(this.zt[t][this.zt[t].length-1].length>0)return a.default.eventsDropped([this.zt[t][this.zt[t].length-1].shift()],n.AWTEventsDroppedReason.QueueFull),!0;t++}return!1},e.prototype.Jt=function(e){for(var t=n.AWTEventPriority.High;t>=e;){for(;this.zt[t][0].length>0;){var i=this.zt[t][0].pop();this.jt--,this.Gt.addEventToBatch(i)}t--}this.Gt.flushBatch()},e.prototype.Yt=function(e){var t=this;this.hasEvents()&&this.sendEventsForPriorityAndAbove(n.AWTEventPriority.Low),this.ei(function(){t.$t(),null!==e&&void 0!==e&&e(),t.Ht.length>0?setTimeout(function(){return t.Yt(t.Ht.shift())},0):(t.qt=!1,t.hasEvents()&&o.default.scheduleTimer())})},e.prototype.ei=function(e){var t=this;this.Vt.isCompletelyIdle()?e():setTimeout(function(){return t.ei(e)},250)},e}();t.default=c},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(3),r=function(){function e(){}return e.setEventsHandler=function(e){n.default.setEventsHandler(e)},e.getEventsHandler=function(){return n.default.getEventsHandler()},e.scheduleTimer=function(){n.default.scheduleTimer()},e}();t.default=r},function(e,t,i){e.exports=i(16)}])});
//# sourceMappingURL=aria-webjs-sdk-1.8.3.min.js.map
/*
 * Licensed to the Apache Software Foundation (ASF) under one
 * or more contributor license agreements.  See the NOTICE file
 * distributed with this work for additional information
 * regarding copyright ownership.  The ASF licenses this file
 * to you under the Apache License, Version 2.0 (the
 * "License"); you may not use this file except in compliance
 * with the License.  You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing,
 * software distributed under the License is distributed on an
 * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
 * KIND, either express or implied.  See the License for the
 * specific language governing permissions and limitations
 * under the License.
 *
 * Compared to 4.0.0, this version fixed a bug in readResponseHeaders function.
 * For the header's value like "Ref A: valueA Ref B: valueB Ref C: valueC", it only reads "Ref A" in version 4.0.0.
 * In this version, it will get the right value.
 */

var init = function (e, t, n) { e.version = { major: 4, minor: 0, build: 0 }, e.deferred = n("./lib/deferred.js"), e.utils = n("./lib/utils.js"), e.xml = n("./lib/xml.js"), e.oData = n("./lib/odata.js"), e.store = n("./lib/store.js"), e.cache = n("./lib/cache.js") }, datas = { cache: function (e, t, n) { "use strict"; var r = n("./utils.js"), a = n("./deferred.js"), o = n("./store.js"), i = n("./cache/source.js"), u = r.assigned, s = r.delay, l = r.extend, c = r.djsassert, d = (r.isArray, r.normalizeURI, r.parseInt10), f = r.undefinedDefault, p = a.createDeferred, m = a.DjsDeferred, h = r.getJsonValueArraryLength, y = r.sliceJsonValueArray, v = r.concatJsonValueArray; function g(e, t) { if (void 0 === e || "number" != typeof e) throw { message: "'" + t + "' must be a number." }; if (isNaN(e) || e < 0 || !isFinite(e)) throw { message: "'" + t + "' must be greater than or equal to zero." } } function E(e, t) { if (void 0 !== e && ("number" != typeof e || isNaN(e) || !isFinite(e))) throw { message: "'" + t + "' must be a number." } } function b(e, t) { var n, r; for (n = 0, r = e.length; n < r; n++)if (e[n] === t) return e.splice(n, 1), !0; return !1 } function T(e) { var t = 0, n = typeof e; if ("object" === n && e) for (var r in e) t += 2 * r.length + T(e[r]); else t = "string" === n ? 2 * e.length : 8; return t } function D(e, t, n) { return { i: e = Math.floor(e / n) * n, c: (t = Math.ceil((t + 1) / n) * n) - e } } var S = "destroy", O = "idle", w = "init", N = "read", x = "prefetch", P = "write", C = "cancel", A = "end", I = "error", M = "start", _ = "wait", R = "clear", G = "done", j = "local", L = "save", k = "source"; function U(e, t, n, r, a, o, i) { var u, s, l = this; l.p = t, l.i = r, l.c = a, l.d = o, l.s = M, l.canceled = !1, l.pending = i, l.oncomplete = null, l.cancel = function () { if (n) { var e = l.s; e !== I && e !== A && e !== C && (l.canceled = !0, l.transition(C, u)) } }, l.complete = function () { c(l.s !== A, "DataCacheOperation.complete() - operation is in the end state", l), l.transition(A, u) }, l.error = function (e) { l.canceled || (c(l.s !== A, "DataCacheOperation.error() - operation is in the end state", l), c(l.s !== I, "DataCacheOperation.error() - operation is in the error state", l), l.transition(I, e)) }, l.run = function (e) { s = e, l.transition(l.s, u) }, l.wait = function (e) { c(l.s !== A, "DataCacheOperation.wait() - operation is in the end state", l), l.transition(_, e) }; return l.transition = function (t, n) { l.s = t, u = n, function (t, n, r) { switch (t) { case M: n !== w && e(l, t, n, r); break; case _: e(l, t, n, r); break; case C: e(l, t, n, r), l.fireCanceled(), l.transition(A); break; case I: e(l, t, n, r), l.canceled = !0, l.fireRejected(r), l.transition(A); break; case A: l.oncomplete && l.oncomplete(l), l.canceled || l.fireResolved(), e(l, t, n, r); break; default: var a = e(l, t, n, r); c(a, "Bad operation state: " + t + " cacheState: " + n, this) } }(t, s, n) }, l } function B(e) { var t, n = w, a = { counts: 0, netReads: 0, prefetches: 0, cacheReads: 0 }, E = [], I = [], _ = [], B = 0, q = !1, H = f(e.cacheSize, 1048576), V = 0, z = 0, F = 0, J = 0 === H, K = f(e.pageSize, 50), Y = f(e.prefetchSize, K), X = "1.0", $ = 0, Q = e.source; "string" == typeof Q && (Q = new i.ODataCacheSource(e)), Q.options = e; var W = o.createStore(e.name, e.mechanism), Z = this; Z.onidle = e.idle, Z.stats = a, Z.count = function () { if (t) throw t; var e = p(), n = !1; if (q) return s(function () { e.resolve(V) }), e.promise(); var r = Q.count(function (t) { r = null, a.counts++, e.resolve(t) }, function (t) { r = null, e.reject(l(t, { canceled: n })) }); return l(e.promise(), { cancel: function () { r && (n = !0, r.abort(), r = null) } }) }, Z.clear = function () { if (t) throw t; if (0 === E.length) { var e = p(), n = new U(de, e, !1); return ie(n, E), e.promise() } return E[0].p }, Z.filterForward = function (e, t, n) { return ae(e, t, n, !1) }, Z.filterBack = function (e, t, n) { return ae(e, t, n, !0) }, Z.readRange = function (e, n) { if (g(e, "index"), g(n, "count"), t) throw t; var r = p(), a = new U(pe, r, !0, e, n, {}, 0); return ie(a, I), l(r.promise(), { cancel: function () { a.cancel() } }) }, Z.ToObservable = Z.toObservable = function () { if (!r.inBrowser()) throw { message: "Only in broser supported" }; if (!window.Rx || !window.Rx.Observable) throw { message: "Rx library not available - include rx.js" }; if (t) throw t; return new window.Rx.Observable(function (e) { var t = !1, n = 0, r = function (n) { t || e.onError(n) }, a = function (o) { if (!t) { var i, u; for (i = 0, u = o.value.length; i < u; i++)e.onNext(o.value[i]); o.value.length < K ? e.onCompleted() : (n += K, Z.readRange(n, K).then(a, r)) } }; return Z.readRange(n, K).then(a, r), { Dispose: function () { e.dispose(), t = !0 } } }) }; var ee = function (e) { return function (n) { var r, a; for (t = { message: e, error: n }, c(0 === _.length, "prefetchOperations.length === 0"), r = 0, a = I.length; r < a; r++)I[r].fireRejected(t); for (r = 0, a = E.length; r < a; r++)E[r].fireRejected(t); I = E = null } }, te = function (e) { if (e !== n) { n = e; var t, r, a = E.concat(I, _); for (t = 0, r = a.length; t < r; t++)a[t].run(n) } }, ne = function () { c(n === S || n === w, "DataCache.clearStore() - cache is not on the destroy or initialize state, current sate = " + n); var e = new m; return W.clear(function () { B = 0, q = !1, V = 0, z = 0, F = 0, J = 0 === H, a = { counts: 0, netReads: 0, prefetches: 0, cacheReads: 0 }, Z.stats = a, W.close(), e.resolve() }, function (t) { e.reject(t) }), e }, re = function (e) { var t = b(E, e); t || (t = b(I, e)) || b(_, e), $--, te(O) }, ae = function (e, n, r, a) { if (e = d(e), n = d(n), isNaN(e)) throw { message: "'index' must be a valid number.", index: e }; if (isNaN(n)) throw { message: "'count' must be a valid number.", count: n }; if (t) throw t; e = Math.max(e, 0); var o = p(), i = { value: [] }, u = !1, s = null, c = function (e, t) { u || (n > 0 && i.value.length >= n ? o.resolve(i) : s = Z.readRange(e, t).then(function (u) { u["@odata.context"] && !i["@odata.context"] && (i["@odata.context"] = u["@odata.context"]); for (var s = 0, l = u.value.length; s < l && (n < 0 || i.value.length < n); s++) { var d = a ? l - s - 1 : s, f = u.value[d]; if (r(f)) { var p = { index: e + d, item: f }; a ? i.value.unshift(p) : i.value.push(p) } } if (!a && u.value.length < t || a && e <= 0) o.resolve(i); else { var m = a ? Math.max(e - K, 0) : e + t; c(m, K) } }, function (e) { o.reject(e) })) }, f = D(e, e, K), m = a ? f.i : e, h = a ? e - f.i + 1 : f.i + f.c - e; return c(m, h), l(o.promise(), { cancel: function () { s && s.cancel(), u = !0 } }) }, oe = function () { Z.onidle && 0 === $ && Z.onidle() }, ie = function (e, t) { e.oncomplete = re, t.push(e), $++, e.run(n) }, ue = function (e, t) { var n = { actualCacheSize: B, allDataLocal: q, cacheSize: H, collectionCount: V, highestSavedPage: z, highestSavedPageSize: F, pageSize: K, sourceId: Q.identifier, version: X }; W.addOrUpdate("__settings", n, e, t) }, se = function (e) { return function () { e.resolve(!1) } }, le = function (e, t) { var n = e.c, r = e.i; 0 === n ? z === r - K && (V = z + F) : ((z = Math.max(z, r)) === r && (F = n), B += t, n < K && !V && (V = r + n)), q || V !== z + F || (q = !0) }, ce = function (e, t, n, r) { var a = e.canceled && t !== A; return a && t === C && r && r.cancel && r.cancel(), a }, de = function (e, t, n) { var r = e.transition; if (n !== S) return te(S), !0; switch (t) { case M: r(R); break; case A: oe(); break; case R: ne().then(function () { e.complete() }), e.wait(); break; default: return !1 }return !0 }, fe = function (e, t, n, r) { if (!ce(e, t, 0, r)) { var a = e.transition; if (n !== x) return n === S ? t !== C && e.cancel() : n === O && te(x), !0; switch (t) { case M: _[0] === e && a(j, e.i); break; case G: var o = e.pending; o > 0 && (o -= Math.min(o, r.c)), q || 0 === o || r.c < K || J ? e.complete() : (e.pending = o, a(j, r.i + K)); break; default: return me(e, t, n, r, !0) } } return !0 }, pe = function (e, t, r, o) { if (!ce(e, t, 0, o)) { var i = e.transition; if (r !== N && t !== M) return r === S ? t !== M && e.cancel() : r !== P && (c(n == O || n === x, "DataCache.readStateMachine() - cache is not on the read or idle state."), te(N)), !0; switch (t) { case M: if (r === O || r === x) if (te(N), e.c >= 0) { var u = D(e.i, e.c, K); i(j, u.i) } else i(G, e); break; case G: !function (e, t) { var n = (o = e, i = t, s = o.i + o.c, l = i.i + i.c, c = o.i > i.i ? o.i : i.i, d = s < l ? s : l, d >= c && (u = { i: c, c: d - c }), u), r = 0, a = 0; var o, i, u, s, l, c, d; n && (a = (r = n.i - t.i) + (e.c - h(e.d))), e.d = v(e.d, y(t.d, r, a)) }(e, o); var s = h(e.d); e.c === s || o.c < K ? (a.cacheReads++, function (e) { if (!q && 0 !== Y && !J && (c(n === N, "DataCache.prefetch() - cache is not on the read state, current state: " + n), 0 === _.length || _[0] && -1 !== _[0].c)) { var t = new U(fe, null, !0, e, Y, null, Y); ie(t, _) } }(o.i + o.c), e.complete()) : i(j, o.i + K); break; default: return me(e, t, r, o, !1) } } return !0 }, me = function (e, t, r, o, i) { var u, s = e.error, d = e.transition, f = e.wait; switch (t) { case A: oe(); break; case j: u = function (e) { c(n !== S, "DataCache.readPage() - cache is on the destroy state"); var t = !1, r = l(new m, { cancel: function () { t = !0 } }), a = se(r, "Read page from store failure"); return W.contains(e, function (n) { t || (n ? W.read(e, function (e, n) { t || r.resolve(void 0 !== n, n) }, a) : r.resolve(!1)) }, a), r }(o).then(function (t, n) { e.canceled || (t ? d(G, n) : d(k, o)) }); break; case k: u = function (e) { c(n !== S, "DataCache.fetchPage() - cache is on the destroy state"), c(n !== O, "DataCache.fetchPage() - cache is on the idle state"); var t = new m, r = Q.read(e, K, function (n) { var r = h(n), a = { i: e, c: r, d: n }; t.resolve(a) }, function (e) { t.reject(e) }); return l(t, { cancel: function () { r && (r.abort(), r = null) } }) }(o).then(function (t) { e.canceled || (i ? a.prefetches++ : a.netReads++, d(L, t)) }, s); break; case L: r !== P && (te(P), u = function (e, t) { c(n !== S, "DataCache.savePage() - cache is on the destroy state"), c(n !== O, "DataCache.savePage() - cache is on the idle state"); var r = l(new m, { cancel: function () { } }), a = se(r, "Save page to store failure"), o = function () { r.resolve(!0) }; if (t.c > 0) { var i = T(t); (J = H >= 0 && H < B + i) ? o() : W.addOrUpdate(e, t, function () { le(t, i), ue(o, a) }, a) } else le(t, 0), ue(o, a); return r }(o.i, o).then(function (t) { e.canceled || (!t && i && (e.pending = 0), d(G, o)), te(O) })); break; default: return !1 }return u && (e.canceled ? u.cancel() : e.s === t && f(u)), !0 }; return W.read("__settings", function (e, t) { if (u(t)) { var n = t.version; if (!n || 0 !== n.indexOf("1.")) return void ee("Unsupported cache store version " + n)(); K !== t.pageSize || Q.identifier !== t.sourceId ? ne().then(function () { te(O) }, ee("Unable to clear store during initialization")) : (B = t.actualCacheSize, q = t.allDataLocal, H = t.cacheSize, V = t.collectionCount, z = t.highestSavedPage, F = t.highestSavedPageSize, X = n, te(O)) } else ue(function () { te(O) }, ee("Unable to write settings during initialization.")) }, ee("Unable to read settings from store.")), Z } U.prototype.fireResolved = function () { var e = this.p; e && (this.p = null, e.resolve(this.d)) }, U.prototype.fireRejected = function (e) { var t = this.p; t && (this.p = null, t.reject(e)) }, U.prototype.fireCanceled = function () { this.fireRejected({ canceled: !0, message: "Operation canceled" }) }, e.estimateSize = T, e.createDataCache = function (e) { if (function (e, t) { if (void 0 !== e) { if ("number" != typeof e) throw { message: "'" + t + "' must be a number." }; if (isNaN(e) || e <= 0 || !isFinite(e)) throw { message: "'" + t + "' must be greater than zero." } } }(e.pageSize, "pageSize"), E(e.cacheSize, "cacheSize"), E(e.prefetchSize, "prefetchSize"), !u(e.name)) throw { message: "Undefined or null name", options: e }; if (!u(e.source)) throw { message: "Undefined source", options: e }; return new B(e) } }, source: function (e, t, n) { "use strict"; var r = n("./../utils.js"), a = n("./../odata.js"), o = r.parseInt10, i = r.normalizeURICase; function u(e, t) { return { method: "GET", requestUri: e, user: t.user, password: t.password, enableJsonpCallback: t.enableJsonpCallback, callbackParameterName: t.callbackParameterName, formatQueryString: t.formatQueryString } } function s(e, t, n, r) { return function e(t, n, r, o, i) { var s = u(t, n); var l = a.request(s, function (a) { var u = a["@odata.nextLink"]; if (u) { var s = t.indexOf(".svc/", 0); -1 != s && (u = t.substring(0, s + 5) + u) } if (r.value && a.value) r.value = r.value.concat(a.value); else for (var c in a) "@odata.nextLink" != c && (r[c] = a[c]); u ? l = e(u, n, r, o, i) : o(r) }, i, void 0, n.httpClient, n.metadata); return { abort: function () { l.abort() } } }(e, t, {}, n, r) } e.ODataCacheSource = function (e) { var t = this, n = e.source; return t.identifier = i(encodeURI(decodeURI(n))), t.options = e, t.count = function (e, r) { var i = t.options; return a.request(u(function (e, t) { var n = e.indexOf("?"), r = ""; return n >= 0 && (r = e.substr(n), e = e.substr(0, n)), "/" !== e[e.length - 1] && (e += "/"), e + t + r }(n, "$count"), i), function (t) { var n = o(t.toString()); isNaN(n) ? r({ message: "Count is NaN", count: n }) : e(n) }, r, void 0, i.httpClient, i.metadata) }, t.read = function (e, r, a, o) { return s(function (e, t) { return e + (e.indexOf("?") >= 0 ? "&" : "?") + t }(n, "$skip=" + e + "&$top=" + r), t.options, a, o) }, t } }, deferred: function (e, t, n) { "use strict"; function r() { this._arguments = void 0, this._done = void 0, this._fail = void 0, this._resolved = !1, this._rejected = !1 } r.prototype = { then: function (e, t) { return e && (this._done ? this._done.push(e) : this._done = [e]), t && (this._fail ? this._fail.push(t) : this._fail = [t]), this._resolved ? this.resolve.apply(this, this._arguments) : this._rejected && this.reject.apply(this, this._arguments), this }, resolve: function () { if (this._done) { var e, t; for (e = 0, t = this._done.length; e < t; e++)this._done[e].apply(null, arguments); this._done = void 0, this._resolved = !1, this._arguments = void 0 } else this._resolved = !0, this._arguments = arguments }, reject: function () { if (this._fail) { var e, t; for (e = 0, t = this._fail.length; e < t; e++)this._fail[e].apply(null, arguments); this._fail = void 0, this._rejected = !1, this._arguments = void 0 } else this._rejected = !0, this._arguments = arguments }, promise: function () { var e, t, n, r = {}; return r.then = (e = this, t = "then", n = r, function () { return e[t].apply(e, arguments), n }), r } }, e.createDeferred = function () { return window.jQuery && window.jQuery.Deferred ? new window.jQuery.Deferred : new r }, e.DjsDeferred = r }, odata: function (e, t, n) { "use strict"; var r = e.utils = n("./odata/odatautils.js"), a = e.handler = n("./odata/handler.js"), o = e.metadata = n("./odata/metadata.js"), i = e.net = n("./odata/net.js"), u = e.json = n("./odata/json.js"); e.batch = n("./odata/batch.js"); var s = n("./utils.js"), l = s.assigned, c = (s.defined, s.throwErrorCallback), d = (r.invokeRequest, a.MAX_DATA_SERVICE_VERSION), f = (r.prepareRequest, o.metadataParser), p = [u.jsonHandler, a.textHandler]; function m(e, t, n) { var r, a; for (r = 0, a = p.length; r < a && !p[r][e](t, n); r++); if (r === a) throw { message: "no handler for data" } } e.defaultSuccess = function (e) { window.alert(window.JSON.stringify(e)) }, e.defaultError = c, e.defaultHandler = { read: function (e, t) { e && l(e.body) && e.headers["Content-Type"] && m("read", e, t) }, write: function (e, t) { m("write", e, t) }, maxDataServiceVersion: d, accept: "application/json;q=0.9, */*;q=0.1" }, e.defaultMetadata = [], e.read = function (t, n, r, a, o, i) { var u; return u = t instanceof String || "string" == typeof t ? { requestUri: t } : t, e.request(u, n, r, a, o, i) }, e.request = function (t, n, a, o, l, c) { n = n || e.defaultSuccess, a = a || e.defaultError, o = o || e.defaultHandler, l = l || i.defaultHttpClient, c = c || e.defaultMetadata, t.recognizeDates = s.defined(t.recognizeDates, u.jsonHandler.recognizeDates), t.callbackParameterName = s.defined(t.callbackParameterName, i.defaultHttpClient.callbackParameterName), t.formatQueryString = s.defined(t.formatQueryString, i.defaultHttpClient.formatQueryString), t.enableJsonpCallback = s.defined(t.enableJsonpCallback, i.defaultHttpClient.enableJsonpCallback); var d = { metadata: c, recognizeDates: t.recognizeDates, callbackParameterName: t.callbackParameterName, formatQueryString: t.formatQueryString, enableJsonpCallback: t.enableJsonpCallback }; try { return r.prepareRequest(t, o, d), r.invokeRequest(t, n, a, o, l, d) } catch (e) { if (e.bIsSuccessHandlerError) throw e; a(e) } }, e.parseMetadata = function (e) { return f(null, e) }, e.batch.batchHandler.partHandler = e.defaultHandler, e.metadataHandler = o.metadataHandler, e.jsonHandler = u.jsonHandler }, batch: function (e, t, n) { "use strict"; var r = n("./../utils.js"), a = n("./odatautils.js"), o = n("./handler.js"), i = r.extend, u = r.isArray, s = (r.trimString, o.contentType), l = o.handler, c = a.isBatch, d = o.MAX_DATA_SERVICE_VERSION, f = a.normalizeHeaders, p = a.prepareRequest, m = "multipart/mixed", h = /^HTTP\/1\.\d (\d{3}) (.*)$/i, y = /^([^()<>@,;:\\"\/[\]?={} \t]+)\s?:\s?(.*)/; function v() { return Math.floor(65536 * (1 + Math.random())).toString(16).substr(1) } function g(e) { return e + v() + "-" + v() + "-" + v() } function E(e) { return e.handler.partHandler } function b(e) { var t = e.boundaries; return t[t.length - 1] } function T(e, t, n) { if ((n.contentType = n.contentType || s(m)).mediaType === m) return function (e, t) { if (!c(e)) throw { message: "Data is not a batch object." }; var n, r, a = g("batch_"), o = e.__batchRequests, i = ""; for (n = 0, r = o.length; n < r; n++)i += N(a, !1) + x(o[n], t); return i += N(a, !0), t.contentType.properties.boundary = a, i }(t, n) } function D(e, t) { var n, r, a, o = {}; do { a = t.position, r = O(e, t), null !== (n = y.exec(r)) ? o[n[1]] = n[2] : t.position = a } while (r && n); return f(o), o } function S(e, t, n) { var r, a, o, i = t.position, u = h.exec(O(e, t)); return u ? (r = u[1], a = u[2], o = D(e, t), O(e, t)) : t.position = i, { statusCode: r, statusText: a, headers: o, body: w(e, t, "\r\n" + n) } } function O(e, t) { return w(e, t, "\r\n") } function w(e, t, n) { var r = t.position || 0, a = e.length; if (n) { if (-1 === (a = e.indexOf(n, r))) return null; t.position = a + n.length } else t.position = a; return e.substring(r, a) } function N(e, t) { var n = "\r\n--" + e; return t && (n += "--"), n + "\r\n" } function x(e, t, n) { var r, a = e.__changeRequests; if (u(a)) { if (n) throw { message: "Not Supported: change set nested in other change set" }; var o, s, c = g("changeset_"); for (r = "Content-Type: " + m + "; boundary=" + c + "\r\n", o = 0, s = a.length; o < s; o++)r += N(c, !1) + x(a[o], t, !0); r += N(c, !0) } else { r = "Content-Type: application/http\r\nContent-Transfer-Encoding: binary\r\n\r\n"; var d = i({}, t); d.handler = l, d.request = e, d.contentType = null, p(e, E(t), d), r += P(e) } return r } function P(e) { var t = (e.method ? e.method : "GET") + " " + e.requestUri + " HTTP/1.1\r\n"; for (var n in e.headers) e.headers[n] && (t = t + n + ": " + e.headers[n] + "\r\n"); return t += "\r\n", e.body && (t += e.body), t } e.batchHandler = l(function (e, t, n) { return { __batchResponses: function e(t, n) { var r = "--" + b(n); w(t, n, r), O(t, n); for (var a = [], o = null; "--" !== o && n.position < t.length;) { var i, u = D(t, n), l = s(u["Content-Type"]); if (l && l.mediaType === m) { n.boundaries.push(l.properties.boundary); try { i = e(t, n) } catch (e) { e.response = S(t, n, r), i = [e] } a.push({ __changeResponses: i }), n.boundaries.pop(), w(t, n, "--" + b(n)) } else { if (!l || "application/http" !== l.mediaType) throw { message: "invalid MIME part type " }; O(t, n); var c = S(t, n, r); try { c.statusCode >= 200 && c.statusCode <= 299 ? E(n.handlerContext).read(c, n.handlerContext) : c = { message: "HTTP request failed", response: c } } catch (e) { c = e } a.push(c) } o = t.substr(n.position, 2), O(t, n) } return a }(t, { boundaries: [n.contentType.properties.boundary], handlerContext: n }) } }, T, m, d), e.batchSerializer = T, e.writeRequest = P }, handler: function (e, t, n) { "use strict"; var r = n("./../utils.js"), a = n("./odatautils.js"), o = r.assigned, i = r.extend, u = r.trimString, s = a.maxVersion; function l(e) { if (!e) return null; var t, n, r = e.split(";"), a = {}; for (t = 1, n = r.length; t < n; t++) { var o = r[t].split("="); a[u(o[0])] = o[1] } return { mediaType: u(r[0]), properties: a } } function c(e) { if (e) { var t, n = e.mediaType; for (t in e.properties) n += ";" + t + "=" + e.properties[t]; return n } } function d(e, t, n, r) { var a = {}; return i(a, n), i(a, { contentType: e, dataServiceVersion: t, handler: r }), a } function f(e, t, n) { if (e) { var r = e.headers; r[t] || (r[t] = n) } } function p(e, t) { var n = e.headers; return n && n[t] || void 0 } function m(e) { return l(p(e, "Content-Type")) } var h = /^\s?(\d+\.\d+);?.*$/; function y(e) { var t = p(e, "OData-Version"); if (t) { var n = h.exec(t); if (n && n.length) return n[1] } } function v(e, t) { return e.accept.indexOf(t.mediaType) >= 0 } function g(e, t, n, r) { if (!n || !n.headers) return !1; var a = m(n), o = y(n); if (!a || v(e, a)) { var i = d(a, o, r, e); if (i.request = n, n.body = t(e, n.data, i), void 0 !== n.body) return function (e, t) { if (e) { var n = e.headers, r = n["OData-Version"]; n["OData-Version"] = r ? s(r, t) : t } }(n, i.dataServiceVersion || "4.0"), f(n, "Content-Type", c(i.contentType)), f(n, "OData-MaxVersion", e.maxDataServiceVersion), !0 } return !1 } function E(e, t, n, r) { return { accept: n, maxDataServiceVersion: r, read: function (t, n) { return function (e, t, n, r) { if (!n || !n.headers) return !1; var a = m(n), i = y(n) || "", u = n.body; if (!o(u)) return !1; if (v(e, a)) { var s = d(a, i, r, e); return s.response = n, n.data = t(e, u, s), void 0 !== n.data } return !1 }(this, e, t, n) }, write: function (e, n) { return g(this, t, e, n) } } } e.textHandler = E(function (e, t) { return t }, function (e, t) { return o(t) ? t.toString() : void 0 }, "text/plain", "4.0"), e.contentType = l, e.contentTypeToString = c, e.handler = E, e.createReadWriteContext = d, e.fixRequestHeader = f, e.getRequestOrResponseHeader = p, e.getContentType = m, e.getDataServiceVersion = y, e.MAX_DATA_SERVICE_VERSION = "4.0" }, json: function (e, t, n) { var r = n("./../utils.js"), a = n("./odatautils.js"), o = n("./handler.js"), i = "@odata.context", u = r.assigned, s = r.defined, l = r.isArray, c = r.isObject, d = r.parseInt10, f = r.getFormatKind, p = r.convertByteArrayToHexString, m = (a.formatDateTimeOffset, a.formatDuration), h = a.formatNumberWidth, y = (a.getCanonicalTimezone, a.handler, a.isComplex, a.isPrimitive), v = a.isCollectionType, g = a.lookupComplexType, E = a.lookupEntityType, b = a.lookupSingleton, T = a.lookupEntitySet, D = a.lookupDefaultEntityContainer, S = a.lookupProperty, O = a.MAX_DATA_SERVICE_VERSION, w = a.maxVersion, N = a.isPrimitiveEdmType, x = a.isGeographyEdmType, P = a.isGeometryEdmType, C = "f", A = "e", I = "p", M = "c", _ = "s", R = "erl", G = "erls", j = "v", L = "f", k = "de", U = "l", B = "dl", q = o.contentType("application/json"), H = ["@odata.id", "@odata.type"]; function V(e, t, n) { var a, o = s(n.recognizeDates, e.recognizeDates), c = n.metadata, d = "string" == typeof t ? JSON.parse(t) : t; u(n.contentType) && u(n.contentType.properties) && (a = n.contentType.properties["odata.metadata"]); var p = f(a, 1); return 0 === p ? d : 1 === p ? function (e, t, n) { if (!u(t) || l(t)) return e; var r = e[i], a = re(e, t); switch (a.detectedPayloadKind) { case j: return null !== a.type ? X(e, a, r, t, n) : Z(e, "value", a.typeName); case C: return function (e, t, n, r, a) { var o, i, u, l = [], c = e.value; for (o = 0, i = c.length; o < i; o++) { var d = c[o]; if (s(d["@odata.type"])) { var f = d["@odata.type"].substring(1), p = E(f, t), m = { contentTypeOdata: n.contentTypeOdata, detectedPayloadKind: n.detectedPayloadKind, name: n.name, type: p, typeName: f }; u = X(d, m, r, t, a) } else u = X(d, n, r, t, a); l.push(u) } return e.value = l, e }(e, t, a, r, n); case A: return X(e, a, r, t, n); case M: return function (e, t, n, r, a) { if (W(e, "", n.typeName), null !== n.type) { var o, i, u, l = [], c = e.value; for (o = 0, i = c.length; o < i; o++) { var d = c[o]; if (s(d["@odata.type"])) { var f = d["@odata.type"].substring(1), p = E(f, t), m = { contentTypeOdata: n.contentTypeOdata, detectedPayloadKind: n.detectedPayloadKind, name: n.name, type: p, typeName: f }; u = X(d, m, r, t, a) } else u = X(d, n, r, t, a); l.push(u) } e.value = l } return e }(e, t, a, r, n); case I: return null !== a.type ? X(e, a, r, t, n) : Z(e, "value", a.typeName); case _: case PAYLOADTYPE_LINKS: return e }return e }(d, c, o) : 2 === p ? function e(t, n, a) { var o; if (r.isObject(t)) for (var i in t) if (t.hasOwnProperty(i) && -1 === i.indexOf("@")) if (r.isArray(t[i])) for (var s = 0; s < t[i].length; ++s)e(t[i][s], n, a); else if (r.isObject(t[i])) null !== t[i] && ((o = t[i + "@odata.type"]) ? (o = o.substring(1), x(o) || P(o) || e(t[i], n, a)) : e(t[i], n, a)); else if (o = t[i + "@odata.type"], u(o)) a && te(t, i, o.substring(1)); else { var l = typeof t[i]; "string" === l ? Q(t, i, "String") : "boolean" === l ? Q(t, i, "Boolean") : "number" === l && (t[i] % 1 == 0 ? Q(t, i, "Int32") : Q(t, i, "Decimal")) } return t }(d, c, o) : d } var z = /^\/Date\((-?\d+)(\+|-)?(\d+)?\)\/$/, F = function (e, t) { return t && "Edm.Time" === t.__edmType ? m(t) : t }; function J(e, t, n) { var r = n.dataServiceVersion || "4.0", a = n.contentType = n.contentType || q; if (a && a.mediaType === q.mediaType) { n.dataServiceVersion = w(r, "4.0"); var o = function e(t) { if (!t) return t; if (y(t)) return t; if (l(t)) { var n, r, a = []; for (n = 0, r = t.length; n < r; n++)a[n] = e(t[n]); return a } var o = {}; for (var i in t) K(i) && (o[i] = e(t[i])); return o }(t); if (o) return JSON.stringify(o, F) } } function K(e) { if (!e) return !1; if (-1 == e.indexOf("@odata.")) return !0; var t, n; for (t = 0, n = H.length; t < n; t++) { var r = H[t]; if (-1 != e.indexOf(r)) return !0 } return !1 } function Y(e, t, n, r, a) { for (var o in e) if (-1 === o.indexOf("@")) { for (var i = t, u = e[o], s = S(i.property, o); null === s && void 0 !== i.baseType;)i = E(i.baseType, r), s = S(i.property, o); if (l(u)) { v(s.type) ? W(e, o, s.type.substring(11, s.type.length - 1)) : Z(e, o, s.type); for (var d = 0; d < u.length; d++)$(u[d], s, n, r, a) } else c(u) && null !== u ? $(u, s, n, r, a) : (Z(e, o, s.type), a && ee(e, o, s.type)) } } function X(e, t, n, r, a) { Q(e, "", t.typeName); for (var o = t.type; s(o) && void 0 === o.key && void 0 !== o.baseType;)o = E(o.baseType, r); if (void 0 !== o.key) { var i = t.name + function (e, t) { var n, r, a = t.key[0].propertyRef; if (n = "(", 1 == a.length) r = S(t.property, a[0].name).type, n += ne(e[a[0].name], r); else for (var o = !0, i = 0; i < a.length; i++)o ? o = !1 : n += ",", r = S(t.property, a[i].name).type, n += a[i].name + "=" + ne(e[a[i].name], r); return n += ")" }(e, o); e["@odata.id"] = n.substring(0, n.lastIndexOf("$metadata")) + i, e["@odata.editLink"] = i } return Y(e, t.type, n, r, a), e } function $(e, t, n, r, a) { var o = t.type; v(t.type) && (o = t.type.substring(11, t.type.length - 1)), Q(e, "", t.type); var i = g(o, r); null !== i && Y(e, i, n, r, a) } function Q(e, t, n) { var r = t + "@odata.type"; void 0 === e[r] && (e[r] = "#" + n) } function W(e, t, n) { var r = t + "@odata.type"; void 0 === e[r] && ("Edm." === n.substring(0, 4) ? e[r] = "#Collection(" + n.substring(4) + ")" : e[r] = "#Collection(" + n + ")") } function Z(e, t, n) { var r = t + "@odata.type"; return void 0 === e[r] && ("Edm." === n.substring(0, 4) ? e[r] = "#" + n.substring(4) : e[r] = "#" + n), e } function ee(e, t, n) { "Edm.Date" === n ? e[t] = a.parseDate(e[t], !0) : "Edm.DateTimeOffset" === n ? e[t] = a.parseDateTimeOffset(e[t], !0) : "Edm.Duration" === n ? e[t] = a.parseDuration(e[t], !0) : "Edm.Time" === n && (e[t] = a.parseTime(e[t], !0)) } function te(e, t, n) { "Date" === n ? e[t] = a.parseDate(e[t], !0) : "DateTimeOffset" === n ? e[t] = a.parseDateTimeOffset(e[t], !0) : "Duration" === n ? e[t] = a.parseDuration(e[t], !0) : "Time" === n && (e[t] = a.parseTime(e[t], !0)) } function ne(e, t) { switch (e = "" + function (e, t) { switch (t) { case "Edm.Binary": return p(e); default: return e } }(e, t), e = encodeURIComponent(e.replace("'", "''")), t) { case "Edm.Binary": return "X'" + e + "'"; case "Edm.DateTime": return "datetime'" + e + "'"; case "Edm.DateTimeOffset": return "datetimeoffset'" + e + "'"; case "Edm.Decimal": return e + "M"; case "Edm.Guid": return "guid'" + e + "'"; case "Edm.Int64": return e + "L"; case "Edm.Float": return e + "f"; case "Edm.Double": return e + "D"; case "Edm.Geography": return "geography'" + e + "'"; case "Edm.Geometry": return "geometry'" + e + "'"; case "Edm.Time": return "time'" + e + "'"; case "Edm.String": return "'" + e + "'"; default: return e } } function re(e, t) { var n = e[i]; if (!n || "string" != typeof n) return null; var a, o = n.lastIndexOf("#"); return -1 === o ? { kind: _, type: a || null } : function (e, t) { var n = {}; if (-1 === e.indexOf("/")) { if (0 === e.length) return n.detectedPayloadKind = _, n; if ("Edm.Null" === e) return n.detectedPayloadKind = j, n.isNullProperty = !0, n; if ("Collection($ref)" === e) return n.detectedPayloadKind = G, n; if ("$ref" === e) return n.detectedPayloadKind = R, n } n.type = void 0, n.typeName = void 0; for (var a, o, i = e.split("/"), u = 0; u < i.length; ++u) { var s = i[u]; if (void 0 === n.typeName) { if (-1 !== s.indexOf("(")) { for (var l = s.length - 2, c = 1; c > 0 && l > 0; --l)"(" == s.charAt(l) ? c-- : ")" == s.charAt(l) && c++; var d = s.substring(l + 2, s.length - 1); if (s = s.substring(0, l + 1), r.startsWith(s, "Collection")) { if (n.detectedPayloadKind = M, n.typeName = d, null !== (a = E(n.typeName, t))) { n.type = a; continue } if (null !== (a = g(n.typeName, t))) { n.type = a; continue } n.type = null; continue } n.projection = d } if (N(o = s) || x(o) || P(o)) { n.typeName = s, n.type = null, n.detectedPayloadKind = j; continue } var f = D(t), p = T(f.entitySet, s); if (null !== p) { n.typeName = p.entityType, n.type = E(n.typeName, t), n.name = s, n.detectedPayloadKind = C; continue } var m = b(f.singleton, s); if (null !== m) { n.typeName = m.entityType, n.type = E(n.typeName, t), n.name = s, n.detectedPayloadKind = A; continue } } else { if (r.endsWith(s, "$entity") && n.detectedPayloadKind === C) { n.detectedPayloadKind = A; continue } if (-1 !== s.indexOf(".")) { if (n.typeName = s, null !== (a = E(n.typeName, t))) { n.type = a; continue } if (null !== (a = g(n.typeName, t))) { n.type = a; continue } } if (n.detectedPayloadKind === C || n.detectedPayloadKind === A) { var h = S(n.type.property, s); if (null !== h) { if (n.typeName = h.type, r.startsWith(h.type, "Collection")) { n.detectedPayloadKind = M; var y = h.type.substring(11, h.type.length - 1); n.typeName = y, n.type = g(y, t), n.detectedPayloadKind = M } else n.type = g(h.type, t), n.detectedPayloadKind = I; n.name = s } continue } if ("$delta" === s) { n.deltaKind = L; continue } if (r.endsWith(s, "/$deletedEntity")) { n.deltaKind = k; continue } if (r.endsWith(s, "/$link")) { n.deltaKind = U; continue } if (r.endsWith(s, "/$deletedLink")) { n.deltaKind = B; continue } } } return n }(n.substring(o + 1), t) } var ae = o.handler(V, J, "application/json", O); ae.recognizeDates = !1, e.createPayloadInfo = re, e.jsonHandler = ae, e.jsonParser = V, e.jsonSerializer = J, e.parseJsonDateString = function (e) { var t = e && z.exec(e); if (t) { var n = new Date(d(t[1])); if (t[2]) { var r = d(t[3]); "-" === t[2] && (r = -r); var a = n.getUTCMinutes(); n.setUTCMinutes(a - r), n.__edmType = "Edm.DateTimeOffset", n.__offset = function (e) { var t; e < 0 ? (t = "-", e = -e) : t = "+"; var n = Math.floor(e / 60); return e -= 60 * n, t + h(n, 2) + ":" + h(e, 2) }(r) } if (!isNaN(n.valueOf())) return n } } }, metadata: function (e, t, n) { "use strict"; var r = n("./../utils.js"), a = n("./../xml.js"), o = n("./handler.js"), i = r.contains, u = (r.normalizeURI, a.xmlAttributes), s = a.xmlChildElements, l = a.xmlFirstChildElement, c = a.xmlInnerText, d = a.xmlLocalName, f = a.xmlNamespaceURI, p = (a.xmlNS, a.xmlnsNS), m = a.xmlParse, h = a.http + "docs.oasis-open.org/odata/" + "ns", y = h + "/edmx", v = h + "/edm", g = h + "/metadata", E = o.MAX_DATA_SERVICE_VERSION; function b(e, t, n, r) { return { attributes: e, elements: t, text: n || !1, ns: r } } var T = { elements: { Action: b(["Name", "IsBound", "EntitySetPath"], ["ReturnType", "Parameter*", "Annotation*"]), ActionImport: b(["Name", "Action", "EntitySet", "Annotation*"]), Annotation: b(["Term", "Qualifier", "Binary", "Bool", "Date", "DateTimeOffset", "Decimal", "Duration", "EnumMember", "Float", "Guid", "Int", "String", "TimeOfDay", "AnnotationPath", "NavigationPropertyPath", "Path", "PropertyPath", "UrlRef"], ["Binary*", "Bool*", "Date*", "DateTimeOffset*", "Decimal*", "Duration*", "EnumMember*", "Float*", "Guid*", "Int*", "String*", "TimeOfDay*", "And*", "Or*", "Not*", "Eq*", "Ne*", "Gt*", "Ge*", "Lt*", "Le*", "AnnotationPath*", "Apply*", "Cast*", "Collection*", "If*", "IsOf*", "LabeledElement*", "LabeledElementReference*", "Null*", "NavigationPropertyPath*", "Path*", "PropertyPath*", "Record*", "UrlRef*", "Annotation*"]), AnnotationPath: b(null, null, !0), Annotations: b(["Target", "Qualifier"], ["Annotation*"]), Apply: b(["Function"], ["String*", "Path*", "LabeledElement*", "Annotation*"]), And: b(null, null, !0), Or: b(null, null, !0), Not: b(null, null, !0), Eq: b(null, null, !0), Ne: b(null, null, !0), Gt: b(null, null, !0), Ge: b(null, null, !0), Lt: b(null, null, !0), Le: b(null, null, !0), Binary: b(null, null, !0), Bool: b(null, null, !0), Cast: b(["Type"], ["Path*", "Annotation*"]), Collection: b(null, ["Binary*", "Bool*", "Date*", "DateTimeOffset*", "Decimal*", "Duration*", "EnumMember*", "Float*", "Guid*", "Int*", "String*", "TimeOfDay*", "And*", "Or*", "Not*", "Eq*", "Ne*", "Gt*", "Ge*", "Lt*", "Le*", "AnnotationPath*", "Apply*", "Cast*", "Collection*", "If*", "IsOf*", "LabeledElement*", "LabeledElementReference*", "Null*", "NavigationPropertyPath*", "Path*", "PropertyPath*", "Record*", "UrlRef*"]), ComplexType: b(["Name", "BaseType", "Abstract", "OpenType"], ["Property*", "NavigationProperty*", "Annotation*"]), Date: b(null, null, !0), DateTimeOffset: b(null, null, !0), Decimal: b(null, null, !0), Duration: b(null, null, !0), EntityContainer: b(["Name", "Extends"], ["EntitySet*", "Singleton*", "ActionImport*", "FunctionImport*", "Annotation*"]), EntitySet: b(["Name", "EntityType", "IncludeInServiceDocument"], ["NavigationPropertyBinding*", "Annotation*"]), EntityType: b(["Name", "BaseType", "Abstract", "OpenType", "HasStream"], ["Key*", "Property*", "NavigationProperty*", "Annotation*"]), EnumMember: b(null, null, !0), EnumType: b(["Name", "UnderlyingType", "IsFlags"], ["Member*"]), Float: b(null, null, !0), Function: b(["Name", "IsBound", "IsComposable", "EntitySetPath"], ["ReturnType", "Parameter*", "Annotation*"]), FunctionImport: b(["Name", "Function", "EntitySet", "IncludeInServiceDocument", "Annotation*"]), Guid: b(null, null, !0), If: b(null, ["Path*", "String*", "Annotation*"]), Int: b(null, null, !0), IsOf: b(["Type", "MaxLength", "Precision", "Scale", "Unicode", "SRID", "DefaultValue", "Annotation*"], ["Path*"]), Key: b(null, ["PropertyRef*"]), LabeledElement: b(["Name"], ["Binary*", "Bool*", "Date*", "DateTimeOffset*", "Decimal*", "Duration*", "EnumMember*", "Float*", "Guid*", "Int*", "String*", "TimeOfDay*", "And*", "Or*", "Not*", "Eq*", "Ne*", "Gt*", "Ge*", "Lt*", "Le*", "AnnotationPath*", "Apply*", "Cast*", "Collection*", "If*", "IsOf*", "LabeledElement*", "LabeledElementReference*", "Null*", "NavigationPropertyPath*", "Path*", "PropertyPath*", "Record*", "UrlRef*", "Annotation*"]), LabeledElementReference: b(["Term"], ["Binary*", "Bool*", "Date*", "DateTimeOffset*", "Decimal*", "Duration*", "EnumMember*", "Float*", "Guid*", "Int*", "String*", "TimeOfDay*", "And*", "Or*", "Not*", "Eq*", "Ne*", "Gt*", "Ge*", "Lt*", "Le*", "AnnotationPath*", "Apply*", "Cast*", "Collection*", "If*", "IsOf*", "LabeledElement*", "LabeledElementReference*", "Null*", "NavigationPropertyPath*", "Path*", "PropertyPath*", "Record*", "UrlRef*"]), Member: b(["Name", "Value"], ["Annotation*"]), NavigationProperty: b(["Name", "Type", "Nullable", "Partner", "ContainsTarget"], ["ReferentialConstraint*", "OnDelete*", "Annotation*"]), NavigationPropertyBinding: b(["Path", "Target"]), NavigationPropertyPath: b(null, null, !0), Null: b(null, ["Annotation*"]), OnDelete: b(["Action"], ["Annotation*"]), Path: b(null, null, !0), Parameter: b(["Name", "Type", "Nullable", "MaxLength", "Precision", "Scale", "SRID"], ["Annotation*"]), Property: b(["Name", "Type", "Nullable", "MaxLength", "Precision", "Scale", "Unicode", "SRID", "DefaultValue"], ["Annotation*"]), PropertyPath: b(null, null, !0), PropertyRef: b(["Name", "Alias"]), PropertyValue: b(["Property", "Path"], ["Binary*", "Bool*", "Date*", "DateTimeOffset*", "Decimal*", "Duration*", "EnumMember*", "Float*", "Guid*", "Int*", "String*", "TimeOfDay*", "And*", "Or*", "Not*", "Eq*", "Ne*", "Gt*", "Ge*", "Lt*", "Le*", "AnnotationPath*", "Apply*", "Cast*", "Collection*", "If*", "IsOf*", "LabeledElement*", "LabeledElementReference*", "Null*", "NavigationPropertyPath*", "Path*", "PropertyPath*", "Record*", "UrlRef*", "Annotation*"]), Record: b(null, ["PropertyValue*", "Property*", "Annotation*"]), ReferentialConstraint: b(["Property", "ReferencedProperty", "Annotation*"]), ReturnType: b(["Type", "Nullable", "MaxLength", "Precision", "Scale", "SRID"]), String: b(null, null, !0), Schema: b(["Namespace", "Alias"], ["Action*", "Annotations*", "Annotation*", "ComplexType*", "EntityContainer", "EntityType*", "EnumType*", "Function*", "Term*", "TypeDefinition*", "Annotation*"]), Singleton: b(["Name", "Type"], ["NavigationPropertyBinding*", "Annotation*"]), Term: b(["Name", "Type", "BaseTerm", "DefaultValue ", "AppliesTo", "Nullable", "MaxLength", "Precision", "Scale", "SRID"], ["Annotation*"]), TimeOfDay: b(null, null, !0), TypeDefinition: b(["Name", "UnderlyingType", "MaxLength", "Unicode", "Precision", "Scale", "SRID"], ["Annotation*"]), UrlRef: b(null, ["Binary*", "Bool*", "Date*", "DateTimeOffset*", "Decimal*", "Duration*", "EnumMember*", "Float*", "Guid*", "Int*", "String*", "TimeOfDay*", "And*", "Or*", "Not*", "Eq*", "Ne*", "Gt*", "Ge*", "Lt*", "Le*", "AnnotationPath*", "Apply*", "Cast*", "Collection*", "If*", "IsOf*", "LabeledElement*", "LabeledElementReference*", "Null*", "NavigationPropertyPath*", "Path*", "PropertyPath*", "Record*", "UrlRef*", "Annotation*"]), Edmx: b(["Version"], ["DataServices", "Reference*"], !1, y), DataServices: b(["m:MaxDataServiceVersion", "m:DataServiceVersion"], ["Schema*"], !1, y), Reference: b(["Uri"], ["Include*", "IncludeAnnotations*", "Annotation*"]), Include: b(["Namespace", "Alias"]), IncludeAnnotations: b(["TermNamespace", "Qualifier", "TargetNamespace"]) } }; function D(e) { if (!e) return e; if (e.length > 1) { var t = e.substr(0, 2); return t === t.toUpperCase() ? e : e.charAt(0).toLowerCase() + e.substr(1) } return e.charAt(0).toLowerCase() } function S(e, t) { var n, r, a = e.elements; if (!a) return null; for (n = 0, r = a.length; n < r; n++) { var o = a[n], i = !1; if ("*" === o.charAt(o.length - 1) && (i = !0, o = o.substr(0, o.length - 1)), t === o) return { isArray: i, propertyName: D(o) } } return null } function O(e) { return e === v } function w(e) { var t = d(e), n = f(e), r = T.elements[t]; if (!r) return null; if (r.ns) { if (n !== r.ns) return null } else if (!O(n)) return null; var a = {}, o = r.attributes || []; return u(e, function (e) { var t = d(e), n = f(e), r = e.value; if (n !== p) { var u = null; O(n) || null === n ? u = "" : n === g && (u = "m:"), null !== u && i(o, u += t) && (a[D(t)] = r) } }), s(e, function (e) { var t = d(e), n = S(r, t); if (n) if (n.isArray) { var o = a[n.propertyName]; o || (o = [], a[n.propertyName] = o), o.push(w(e)) } else a[n.propertyName] = w(e) }), r.text && (a.text = c(e)), a } function N(e, t) { var n = m(t); return w(l(n)) || void 0 } e.metadataHandler = o.handler(N, null, "application/xml", E), e.schema = T, e.scriptCase = D, e.getChildSchema = S, e.parseConceptualModelElement = w, e.metadataParser = N }, net: function (e, t, n) { var r = n("./../utils.js"), a = r.defined, o = r.delay, i = 0; function u(e) { return !(e.method && "GET" !== e.method) } function s(e) { return 0 === e.indexOf("http://") || 0 === e.indexOf("https://") || 0 === e.indexOf("file://") } function l(e) { if (!s(e)) return !0; var t = window.location, n = t.protocol + "//" + t.host + "/"; return 0 === e.indexOf(n) } function c(e) { return e && (d(e, ""), e.parentNode.removeChild(e)), null } function d(e, t) { var n = e.contentWindow ? e.contentWindow.document : e.contentDocument.document; n.open(), n.write(t), n.close() } e.defaultHttpClient = { callbackParameterName: "$callback", formatQueryString: "$format=json", enableJsonpCallback: !1, request: function () { var e = this; return function (t, n, r) { var s, f = {}, p = null, m = !1; f.abort = function () { s = c(s), m || (m = !0, p && (p.abort(), p = null), r({ message: "Request aborted" })) }; var h, y = function () { s = c(s), m || (m = !0, p = null, r({ message: "Request timed out" })) }, v = t.requestUri, g = a(t.enableJsonpCallback, e.enableJsonpCallback), E = a(t.callbackParameterName, e.callbackParameterName), b = a(t.formatQueryString, e.formatQueryString); if (!g || l(v)) { if ((p = function () { if (window.XMLHttpRequest) return new window.XMLHttpRequest; var e; if (window.ActiveXObject) try { return new window.ActiveXObject("Msxml2.XMLHTTP.6.0") } catch (t) { try { return new window.ActiveXObject("Msxml2.XMLHTTP.3.0") } catch (t) { e = t } } else e = { message: "XMLHttpRequest not supported" }; throw e }()).onreadystatechange = function () { if (!m && null !== p && 4 === p.readyState) { var e = p.statusText, a = p.status; 1223 === a && (a = 204, e = "No Content"); var o = []; !function (e, t) { var n, r, a = e.getAllResponseHeaders().split(/\r?\n/); for (n = 0, r = a.length; n < r; n++)if (a[n]) { var o = a[n].indexOf(": "), i = a[n].substring(0, o), u = a[n].substring(o + 2); t[i] = u } }(p, o); var i = { requestUri: v, statusCode: a, statusText: e, headers: o, body: p.responseText }; m = !0, p = null, a >= 200 && a <= 299 ? n(i) : r({ message: "HTTP request failed", request: t, response: i }) } }, p.open(t.method || "GET", v, !0, t.user, t.password), t.headers) for (h in t.headers) p.setRequestHeader(h, t.headers[h]); t.timeoutMS && (p.timeout = t.timeoutMS, p.ontimeout = y), p.send(t.body) } else { if (!u(t)) throw { message: "Request is not local and cannot be done through JSONP." }; var T = i; i += 1; var D, S = T.toString(); h = "handleJSONP_" + S, window[h] = function (e) { var t; (s = c(s), m) || (!0, window.clearTimeout(D), function (e, t) { try { delete window[e] } catch (n) { window[e] = void 0, t === i - 1 && (i -= 1) } }(h, T), window.ActiveXObject && (e = window.JSON.parse(window.JSON.stringify(e))), t = b && "$format=json" != b ? { "Content-Type": b.substring(8), "OData-Version": "4.0" } : { "Content-Type": "application/json;odata.metadata=minimal", "OData-Version": "4.0" }, o(function () { c(s), n({ body: e, statusCode: 200, headers: t }) })) }; var O = t.timeoutMS ? t.timeoutMS : 12e4; D = window.setTimeout(y, O); var w = E + "=parent." + h; b && (w += "&" + b); var N = v.indexOf("?"); -1 === N ? v = v + "?" + w : N === v.length - 1 ? v += w : v = v + "&" + w, s = function (e) { var t = window.document.createElement("IFRAME"); t.style.display = "none"; var n = '<html><head><script type="text/javascript" src="' + e.replace(/&/g, "&amp;").replace(/"/g, "&quot;").replace(/</g, "&lt;") + '"><\/script></head><body></body></html>'; return window.document.getElementsByTagName("BODY")[0].appendChild(t), d(t, n), t }(v) } return f } }() }, e.canUseJSONP = u, e.isAbsoluteUrl = s, e.isLocalUrl = l }, odatautils: function (e, t, n) { "use strict"; var r = n("./../utils.js"), a = r.assigned, o = r.contains, i = r.find, u = r.isArray, s = r.isDate, l = r.isObject, c = r.parseInt10, d = ["Edm.String", "Edm.Int32", "Edm.Int64", "Edm.Boolean", "Edm.Double", "Edm.Single", "Edm.Date", "Edm.DateTimeOffset", "Edm.Duration", "Edm.Time", "Edm.Decimal", "Edm.Guid", "Edm.Byte", "Edm.Int16", "Edm.SByte", "Edm.Binary"], f = ["Edm.Geometry", "Edm.GeometryPoint", "Edm.GeometryLineString", "Edm.GeometryPolygon", "Edm.GeometryCollection", "Edm.GeometryMultiPolygon", "Edm.GeometryMultiLineString", "Edm.GeometryMultiPoint"], p = ["Geometry", "GeometryPoint", "GeometryLineString", "GeometryPolygon", "GeometryCollection", "GeometryMultiPolygon", "GeometryMultiLineString", "GeometryMultiPoint"], m = ["Edm.Geography", "Edm.GeographyPoint", "Edm.GeographyLineString", "Edm.GeographyPolygon", "Edm.GeographyCollection", "Edm.GeographyMultiPolygon", "Edm.GeographyMultiLineString", "Edm.GeographyMultiPoint"], h = ["Geography", "GeographyPoint", "GeographyLineString", "GeographyPolygon", "GeographyCollection", "GeographyMultiPolygon", "GeographyMultiLineString", "GeographyMultiPoint"]; function y(e, t) { if (!e) return null; if (u(e)) { var n, r, a; for (n = 0, r = e.length; n < r; n++)if (a = y(e[n], t)) return a; return null } return e.dataServices ? y(e.dataServices.schema, t) : t(e) } function v(e, t) { return e = 0 === e ? "" : "." + g(e.toString(), 3), t > 0 && ("" === e && (e = ".000"), e += g(t.toString(), 4)), e } function g(e, t, n) { for (var r = e.toString(10); r.length < t;)n ? r += "0" : r = "0" + r; return r } function E(e) { return e && "Z" !== e && "+00:00" !== e && "-00:00" !== e ? e : "Z" } var b = /Collection\((.*)\)/; function T(e) { return b.test(e) } function D(e) { return !!e && l(e) && !u(e) && !s(e) } function S(e) { return "Edm.DateTimeOffset" === e.__edmType || !e.__edmType && e.__offset } function O(e) { if (!e && !D(e)) return !1; var t = e.__metadata || {}, n = e.__deferred || {}; return !t.type && !!n.uri } function w(e) { return D(e) && e.__metadata && "uri" in e.__metadata } function N(e, t) { var n = e && e.results || e; return u(n) && !T(t) && D(n[0]) } function x(e, t, n) { return e ? y(t, function (t) { return C(e, t, n) }) : null } function P(e, t) { return 0 === t.indexOf(e) && "." === t.charAt(e.length) ? t.substr(e.length + 1) : null } function C(e, t, n) { if (e && t) { var r = P(t.namespace, e); if (r) return i(t[n], function (e) { return e.name === r }) } return null } var A = { "content-type": "Content-Type", "content-encoding": "Content-Encoding", "content-length": "Content-Length", "odata-version": "OData-Version", accept: "Accept", "accept-charset": "Accept-Charset", "if-match": "If-Match", "if-none-match": "If-None-Match", "odata-isolation": "OData-Isolation", "odata-maxversion": "OData-MaxVersion", prefer: "Prefer", "content-id": "Content-ID", "content-transfer-encoding": "Content-Transfer-Encoding", etag: "ETag", location: "Location", "odata-entityid": "OData-EntityId", "preference-applied": "Preference-Applied", "retry-after": "Retry-After" }; function I(e) { for (var t in e) { var n = t.toLowerCase(), r = A[n]; if (r && t !== r) { var a = e[t]; delete e[t], e[r] = a } } } var M = /^(-?\d{4,})-(\d{2})-(\d{2})T(\d{2}):(\d{2})(?::(\d{2}))?(?:\.(\d+))?(.*)$/; var _ = /^(\d+):(\d+)(:(\d+)(.(\d+))?)?$/; var R = /^([+-])?P(?:(\d+)Y)?(?:(\d+)M)?(?:(\d+)D)?(?:T(?:(\d+)H)?(?:(\d+)M)?(?:(\d+)(?:\.(\d+))?S)?)?/; function G(e) { var t = e.substring(0, 1); return { d: t = "+" === t ? 1 : -1, h: c(e.substring(1)), m: c(e.substring(e.indexOf(":") + 1)) } } e.dataItemTypeName = function (e, t) { return (e && e.__metadata || {}).type || (t ? t.type : null) }, e.EDM_BINARY = "Edm.Binary", e.EDM_BOOLEAN = "Edm.Boolean", e.EDM_BYTE = "Edm.Byte", e.EDM_DATE = "Edm.Date", e.EDM_DATETIMEOFFSET = "Edm.DateTimeOffset", e.EDM_DURATION = "Edm.Duration", e.EDM_DECIMAL = "Edm.Decimal", e.EDM_DOUBLE = "Edm.Double", e.EDM_GEOGRAPHY = "Edm.Geography", e.EDM_GEOGRAPHY_POINT = "Edm.GeographyPoint", e.EDM_GEOGRAPHY_LINESTRING = "Edm.GeographyLineString", e.EDM_GEOGRAPHY_POLYGON = "Edm.GeographyPolygon", e.EDM_GEOGRAPHY_COLLECTION = "Edm.GeographyCollection", e.EDM_GEOGRAPHY_MULTIPOLYGON = "Edm.GeographyMultiPolygon", e.EDM_GEOGRAPHY_MULTILINESTRING = "Edm.GeographyMultiLineString", e.EDM_GEOGRAPHY_MULTIPOINT = "Edm.GeographyMultiPoint", e.EDM_GEOMETRY = "Edm.Geometry", e.EDM_GEOMETRY_POINT = "Edm.GeometryPoint", e.EDM_GEOMETRY_LINESTRING = "Edm.GeometryLineString", e.EDM_GEOMETRY_POLYGON = "Edm.GeometryPolygon", e.EDM_GEOMETRY_COLLECTION = "Edm.GeometryCollection", e.EDM_GEOMETRY_MULTIPOLYGON = "Edm.GeometryMultiPolygon", e.EDM_GEOMETRY_MULTILINESTRING = "Edm.GeometryMultiLineString", e.EDM_GEOMETRY_MULTIPOINT = "Edm.GeometryMultiPoint", e.EDM_GUID = "Edm.Guid", e.EDM_INT16 = "Edm.Int16", e.EDM_INT32 = "Edm.Int32", e.EDM_INT64 = "Edm.Int64", e.EDM_SBYTE = "Edm.SByte", e.EDM_SINGLE = "Edm.Single", e.EDM_STRING = "Edm.String", e.EDM_TIMEOFDAY = "Edm.Time", e.GEOJSON_POINT = "Point", e.GEOJSON_LINESTRING = "LineString", e.GEOJSON_POLYGON = "Polygon", e.GEOJSON_MULTIPOINT = "MultiPoint", e.GEOJSON_MULTILINESTRING = "MultiLineString", e.GEOJSON_MULTIPOLYGON = "MultiPolygon", e.GEOJSON_GEOMETRYCOLLECTION = "GeometryCollection", e.forEachSchema = y, e.formatDateTimeOffset = function (e) { if ("string" == typeof e) return e; var t = S(e), n = E(e.__offset); if (t && "Z" !== n) { e = new Date(e.valueOf()); var r = G(n), a = e.getUTCHours() + r.d * r.h, o = e.getUTCMinutes() + r.d * r.m; e.setUTCHours(a, o) } else t || (n = ""); var i = e.getUTCFullYear(), u = e.getUTCMonth() + 1, s = ""; i <= 0 && (i = -(i - 1), s = "-"); var l = v(e.getUTCMilliseconds(), e.__ns); return s + g(i, 4) + "-" + g(u, 2) + "-" + g(e.getUTCDate(), 2) + "T" + g(e.getUTCHours(), 2) + ":" + g(e.getUTCMinutes(), 2) + ":" + g(e.getUTCSeconds(), 2) + l + n }, e.formatDateTimeOffsetJSON = function (e) { return "/Date(" + e.getTime() + ")/" }, e.formatDuration = function (e) { var t = e.ms, n = ""; t < 0 && (n = "-", t = -t); var r = Math.floor(t / 864e5); t -= 864e5 * r; var a = Math.floor(t / 36e5); t -= 36e5 * a; var o = Math.floor(t / 6e4); t -= 6e4 * o; var i = Math.floor(t / 1e3); return t -= 1e3 * i, n + "P" + g(r, 2) + "DT" + g(a, 2) + "H" + g(o, 2) + "M" + g(i, 2) + v(t, e.ns) + "S" }, e.formatNumberWidth = g, e.getCanonicalTimezone = E, e.getCollectionType = function (e) { if ("string" == typeof e) { var t = e.indexOf(")", 10); if (0 === e.indexOf("Collection(") && t > 0) return e.substring(11, t) } return null }, e.invokeRequest = function (e, t, n, r, a, o) { return a.request(e, function (a) { try { a.headers && I(a.headers), void 0 === a.data && 204 !== a.statusCode && r.read(a, o) } catch (t) { return void 0 === t.request && (t.request = e), void 0 === t.response && (t.response = a), void n(t) } try { t(a.data, a) } catch (e) { throw e.bIsSuccessHandlerError = !0, e } }, n) }, e.isBatch = function (e) { return D(e) && u(e.__batchRequests) }, e.isCollection = function (e, t) { var n = e && e.results || e; return !!n && T(t) || !t && u(n) && !D(n[0]) }, e.isCollectionType = T, e.isComplex = D, e.isDateTimeOffset = S, e.isDeferred = O, e.isEntry = w, e.isFeed = N, e.isGeographyEdmType = function (e) { return o(m, e) || -1 === e.indexOf(".") && o(h, e) }, e.isGeometryEdmType = function (e) { return o(f, e) || -1 === e.indexOf(".") && o(p, e) }, e.isNamedStream = function (e) { if (!e && !D(e)) return !1; var t = e.__metadata, n = e.__mediaresource; return !t && !!n && !!n.media_src }, e.isPrimitive = function (e) { return s(e) || "string" == typeof e || "number" == typeof e || "boolean" == typeof e }, e.isPrimitiveEdmType = function (e) { return o(d, e) }, e.lookupComplexType = function (e, t) { return x(e, t, "complexType") }, e.lookupDefaultEntityContainer = function (e) { return y(e, function (e) { if (l(e.entityContainer)) return e.entityContainer }) }, e.lookupEntityContainer = function (e, t) { return x(e, t, "entityContainer") }, e.lookupEntitySet = function (e, t) { return i(e, function (e) { return e.name === t }) }, e.lookupSingleton = function (e, t) { return i(e, function (e) { return e.name === t }) }, e.lookupEntityType = function (e, t) { return x(e, t, "entityType") }, e.lookupFunctionImport = function (e, t) { return i(e, function (e) { return e.name === t }) }, e.lookupNavigationPropertyType = function (e, t) { var n = null; if (e) { var r = e.relationship, a = y(t, function (e) { var t, n, a = P(e.namespace, r), o = e.association; if (a && o) for (t = 0, n = o.length; t < n; t++)if (o[t].name === a) return o[t]; return null }); if (a) { var o = a.end[0]; o.role !== e.toRole && (o = a.end[1]), n = o.type } } return n }, e.lookupNavigationPropertyEntitySet = function (e, t, n) { if (e) { var r = e.relationship, a = y(n, function (e) { for (var t = e.entityContainer, n = 0; n < t.length; n++) { var a = t[n].associationSet; if (a) for (var o = 0; o < a.length; o++)if (a[o].association == r) return a[o] } return null }); if (a && a.end[0] && a.end[1]) return a.end[0].entitySet == t ? a.end[1].entitySet : a.end[0].entitySet } return null }, e.lookupInSchema = C, e.lookupProperty = function (e, t) { return i(e, function (e) { return e.name === t }) }, e.lookupInMetadata = x, e.getEntitySetInfo = function (e, t) { return y(t, function (t) { var n = t.entityContainer, r = n.entitySet; if (r) for (var a = 0; a < r.length; a++)if (r[a].name == e) return { entitySet: r[a], containerName: n.name, functionImport: n.functionImport }; return null }) }, e.maxVersion = function (e, t) { if (e === t) return e; for (var n = e.split("."), r = t.split("."), a = n.length >= r.length ? n.length : r.length, o = 0; o < a; o++) { var i = n[o] && c(n[o]), u = r[o] && c(r[o]); if (i > u) return e; if (i < u) return t } }, e.navigationPropertyKind = function (e, t) { return O(e) ? "deferred" : w(e) ? "entry" : N(e) ? "feed" : t && t.relationship ? null !== e && void 0 !== e && N(e) ? "feed" : "entry" : null }, e.normalizeHeaders = I, e.parseBool = function (e) { return "boolean" == typeof e ? e : "string" == typeof e && "true" === e.toLowerCase() }, e.parseDate = function (e, t) { var n = e.split("-"); return 3 != n.length && t ? null : new Date(c(n[0]), c(n[1]) - 1, c(n[2], 0, 0, 0, 0)) }, e.parseDateTimeOffset = function (e, t) { return function (e, t, n) { var r = M.exec(e), a = r ? E(r[8]) : null; if (!r || !t && "Z" !== a) { if (n) return null; throw { message: "Invalid date/time value" } } var o = c(r[1]); o <= 0 && o++; var i = r[7], u = 0; if (i) { if (i.length > 7) { if (n) return null; throw { message: "Cannot parse date/time value to given precision." } } u = g(i.substring(3), 4, !0), i = g(i.substring(0, 3), 3, !0), i = c(i), u = c(u) } else i = 0; var s = c(r[4]), l = c(r[5]), d = c(r[6]) || 0; if ("Z" !== a) { var f = G(a), p = -f.d; s += f.h * p, l += f.m * p } var m = new Date; if (m.setUTCFullYear(o, c(r[2]) - 1, c(r[3])), m.setUTCHours(s, l, d, i), isNaN(m.valueOf())) { if (n) return null; throw { message: "Invalid date/time value" } } return t && (m.__edmType = "Edm.DateTimeOffset", m.__offset = a), u && (m.__ns = u), m }(e, !0, t) }, e.parseDuration = function (e) { var t = R.exec(e); if (null === t) throw { message: "Invalid duration value." }; var n = t[2] || "0", r = t[3] || "0", a = c(t[4] || 0), o = c(t[5] || 0), i = c(t[6] || 0), u = parseFloat(t[7] || 0); if ("0" !== n || "0" !== r) throw { message: "Unsupported duration value." }; var s = t[8], l = 0; if (s) { if (s.length > 7) throw { message: "Cannot parse duration value to given precision." }; l = g(s.substring(3), 4, !0), s = g(s.substring(0, 3), 3, !0), s = c(s), l = c(l) } else s = 0; s += 1e3 * u + 6e4 * i + 36e5 * o + 864e5 * a, "-" === t[1] && (s = -s); var d = { ms: s, __edmType: "Edm.Time" }; return l && (d.ns = l), d }, e.parseTimeOfDay = function (e, t) { var n = _.exec(e); return { h: c(n[1]), m: c(n[2]), s: c(n[4]), ms: c(n[6]) } }, e.parseInt10 = c, e.prepareRequest = function (e, t, n) { e.method || (e.method = "GET"), e.headers ? I(e.headers) : e.headers = {}, void 0 === e.headers.Accept && (e.headers.Accept = t.accept), a(e.data) && void 0 === e.body && t.write(e, n), a(e.headers["OData-MaxVersion"]) || (e.headers["OData-MaxVersion"] = t.maxDataServiceVersion || "4.0"), void 0 === e.async && (e.async = !0) }, e.removeNamespace = P, e.traverse = function (e, t) { return t("", function e(t, n, r) { if (t && "object" == typeof t) for (var a in t) { var o = t[a], i = e(o, a, r); (i = r(a, i, n)) !== o && (void 0 === o ? delete t[a] : t[a] = i) } return t }(e, "", t)) } }, store: function (e, t, n) { e.defaultStoreMechanism = "best", e.createStore = function (t, n) { n || (n = e.defaultStoreMechanism), "best" === n && (n = DomStore.isSupported() ? "dom" : "memory"); var a = r[n]; if (a) return a.create(t); throw { message: "Failed to create store", name: t, mechanism: n } }, e.DomStore = DomStore = n("./store/dom.js"), e.IndexedDBStore = IndexedDBStore = n("./store/indexeddb.js"), e.MemoryStore = MemoryStore = n("./store/memory.js"); var r = { indexeddb: IndexedDBStore, dom: DomStore, memory: MemoryStore }; e.mechanisms = r }, dom: function (e, t, n) { "use strict"; var r = n("./../utils.js"), a = r.throwErrorCallback, o = r.delay, i = null; function u() { var e = { v: this.valueOf(), t: "[object Date]" }; for (var t in this) e[t] = this[t]; return e } function s(e, t) { if (t && "[object Date]" === t.t) { var n = new Date(t.v); for (var r in t) "t" !== r && "v" !== r && (n[r] = t[r]); t = n } return t } function l(e, t) { return e.name + "#!#" + t } function c(e, t) { return t.replace(e.name + "#!#", "") } function d(e) { this.name = e } d.create = function (e) { if (d.isSupported()) return i = i || window.localStorage, new d(e); throw { message: "Web Storage not supported by the browser" } }, d.isSupported = function () { return !!window.localStorage }, d.prototype.add = function (e, t, n, r) { r = r || this.defaultError; var a = this; this.contains(e, function (i) { i ? o(r, { message: "key already exists", key: e }) : a.addOrUpdate(e, t, n, r) }, r) }, d.prototype.addOrUpdate = function (e, t, n, r) { if (r = r || this.defaultError, e instanceof Array) r({ message: "Array of keys not supported" }); else { var a = l(this, e), s = Date.prototype.toJSON; try { var c = t; void 0 !== c && (Date.prototype.toJSON = u, c = window.JSON.stringify(t)), i.setItem(a, c), o(n, e, t) } catch (e) { 22 === e.code || 2147942414 === e.number ? o(r, { name: "QUOTA_EXCEEDED_ERR", error: e }) : o(r, e) } finally { Date.prototype.toJSON = s } } }, d.prototype.clear = function (e, t) { t = t || this.defaultError; try { for (var n = 0, r = i.length; r > 0 && n < r;) { var a = i.key(n); a !== c(this, a) ? (i.removeItem(a), r = i.length) : n++ } o(e) } catch (e) { o(t, e) } }, d.prototype.close = function () { }, d.prototype.contains = function (e, t, n) { n = n || this.defaultError; try { var r = l(this, e), a = i.getItem(r); o(t, null !== a) } catch (e) { o(n, e) } }, d.prototype.defaultError = a, d.prototype.getAllKeys = function (e, t) { t = t || this.defaultError; var n, r, a = []; try { for (n = 0, r = i.length; n < r; n++) { var u = i.key(n), s = c(this, u); u !== s && a.push(s) } o(e, a) } catch (e) { o(t, e) } }, d.prototype.mechanism = "dom", d.prototype.read = function (e, t, n) { if (n = n || this.defaultError, e instanceof Array) n({ message: "Array of keys not supported" }); else try { var r = l(this, e), a = i.getItem(r); a = null !== a && "undefined" !== a ? window.JSON.parse(a, s) : void 0, o(t, e, a) } catch (e) { o(n, e) } }, d.prototype.remove = function (e, t, n) { if (n = n || this.defaultError, e instanceof Array) n({ message: "Batches not supported" }); else try { var r = l(this, e); i.removeItem(r), o(t) } catch (e) { o(n, e) } }, d.prototype.update = function (e, t, n, r) { r = r || this.defaultError; var a = this; this.contains(e, function (i) { i ? a.addOrUpdate(e, t, n, r) : o(r, { message: "key not found", key: e }) }, r) }, t.exports = d }, indexeddb: function (e, t, n) { "use strict"; var r = n("./../utils.js"), a = r.throwErrorCallback, o = (r.delay, r.inBrowser() ? window.mozIndexedDB || window.webkitIndexedDB || window.msIndexedDB || window.indexedDB : void 0), i = r.inBrowser() ? window.IDBKeyRange || window.webkitIDBKeyRange : void 0, u = r.inBrowser() && (window.IDBTransaction || window.webkitIDBTransaction) || {}, s = u.READ_ONLY || "readonly", l = u.READ_WRITE || "readwrite"; function c(e, t) { return function (n) { var r = e || t; if (r) { if ("[object IDBDatabaseException]" === Object.prototype.toString.call(n)) return 11 === n.code ? void r({ name: "QuotaExceededError", error: n }) : void r(n); var a; try { a = (n.target.error || n).name } catch (e) { a = "blocked" === n.type ? "IndexedDBBlocked" : "UnknownError" } r({ name: a, error: n }) } } } function d(e, t, n, r) { var a = e.name, i = e.db, u = c(r, e.defaultError); i ? n(i.transaction(a, t)) : function (e, t, n) { var r = e.name, a = "_odatajs_" + r, i = o.open(a); i.onblocked = n, i.onerror = n, i.onupgradeneeded = function () { var e = i.result; e.objectStoreNames.contains(r) || e.createObjectStore(r) }, i.onsuccess = function (e) { var a = i.result; if (!a.objectStoreNames.contains(r)) { if ("setVersion" in a) { var o = a.setVersion("1.0"); return o.onsuccess = function () { o.transaction.oncomplete = function () { t(a) }, a.createObjectStore(r, null, !1) }, o.onerror = n, void (o.onblocked = n) } return e.target.error = { name: "DBSchemaMismatch" }, void n(e) } a.onversionchange = function (e) { e.target.close() }, t(a) } }(e, function (r) { e.db = r, n(r.transaction(a, t)) }, u) } function f(e) { this.name = e } f.create = function (e) { if (f.isSupported()) return new f(e); throw { message: "IndexedDB is not supported on this browser" } }, f.isSupported = function () { return !!o }, f.prototype.add = function (e, t, n, r) { var a = this.name, o = this.defaultError, i = [], u = []; e instanceof Array ? (i = e, u = t) : (i = [e], u = [t]), d(this, l, function (s) { s.onabort = c(r, o), s.oncomplete = function () { e instanceof Array ? n(i, u) : n(e, t) }; for (var l = 0; l < i.length && l < u.length; l++)s.objectStore(a).add({ v: u[l] }, i[l]) }, r) }, f.prototype.addOrUpdate = function (e, t, n, r) { var a = this.name, o = this.defaultError, i = [], u = []; e instanceof Array ? (i = e, u = t) : (i = [e], u = [t]), d(this, l, function (s) { s.onabort = c(r, o), s.oncomplete = function () { e instanceof Array ? n(i, u) : n(e, t) }; for (var l = 0; l < i.length && l < u.length; l++) { var d = { v: u[l] }; s.objectStore(a).put(d, i[l]) } }, r) }, f.prototype.clear = function (e, t) { var n = this.name, r = this.defaultError; d(this, l, function (a) { a.onerror = c(t, r), a.oncomplete = function () { e() }, a.objectStore(n).clear() }, t) }, f.prototype.close = function () { this.db && (this.db.close(), this.db = null) }, f.prototype.contains = function (e, t, n) { var r = this.name, a = this.defaultError; d(this, s, function (o) { var i = o.objectStore(r).get(e); o.oncomplete = function () { t(!!i.result) }, o.onerror = c(n, a) }, n) }, f.prototype.defaultError = a, f.prototype.getAllKeys = function (e, t) { var n = this.name, r = this.defaultError; d(this, l, function (a) { var o = []; a.oncomplete = function () { e(o) }; var i = a.objectStore(n).openCursor(); i.onerror = c(t, r), i.onsuccess = function (e) { var t = e.target.result; t && (o.push(t.key), t.continue.call(t)) } }, t) }, f.prototype.mechanism = "indexeddb", f.prototype.read = function (e, t, n) { var r = this.name, a = this.defaultError, o = e instanceof Array ? e : [e]; d(this, s, function (i) { var u = []; i.onerror = c(n, a), i.oncomplete = function () { e instanceof Array ? t(o, u) : t(o[0], u[0]) }; for (var s = 0; s < o.length; s++) { var l = i.objectStore(r); l.get.call(l, o[s]).onsuccess = function (e) { var t = e.target.result; u.push(t ? t.v : void 0) } } }, n) }, f.prototype.remove = function (e, t, n) { var r = this.name, a = this.defaultError, o = e instanceof Array ? e : [e]; d(this, l, function (e) { e.onerror = c(n, a), e.oncomplete = function () { t() }; for (var i = 0; i < o.length; i++) { var u = e.objectStore(r); u.delete.call(u, o[i]) } }, n) }, f.prototype.update = function (e, t, n, r) { var a = this.name, o = this.defaultError, u = [], s = []; e instanceof Array ? (u = e, s = t) : (u = [e], s = [t]), d(this, l, function (l) { l.onabort = c(r, o), l.oncomplete = function () { e instanceof Array ? n(u, s) : n(e, t) }; for (var d = 0; d < u.length && d < s.length; d++) { var f = l.objectStore(a).openCursor(i.only(u[d])), p = { v: s[d] }; f.pair = { key: u[d], value: p }, f.onsuccess = function (e) { var t = e.target.result; t ? t.update(e.target.pair.value) : l.abort() } } }, r) }, t.exports = f }, memory: function (e, t, n) { "use strict"; var r = n("./../utils.js"), a = r.throwErrorCallback, o = r.delay; function i(e) { var t = [], n = [], r = {}; this.name = e; var a = function (e) { return e || this.defaultError }; function i(e, t) { var n; return e instanceof Array && (n = "Array of keys not supported"), void 0 !== e && null !== e || (n = "Invalid key"), !n || (o(t, { message: n }), !1) } this.add = function (e, t, n, o) { i(e, o = a(o)) && (r.hasOwnProperty(e) ? o({ message: "key already exists", key: e }) : this.addOrUpdate(e, t, n, o)) }, this.addOrUpdate = function (e, u, s, l) { if (i(e, l = a(l))) { var c = r[e]; void 0 === c && (c = t.length > 0 ? t.splice(0, 1) : n.length), n[c] = u, r[e] = c, o(s, e, u) } }, this.clear = function (e) { n = [], r = {}, t = [], o(e) }, this.contains = function (e, t) { var n = r.hasOwnProperty(e); o(t, n) }, this.getAllKeys = function (e) { var t = []; for (var n in r) t.push(n); o(e, t) }, this.read = function (e, t, u) { if (i(e, u = a(u))) { var s = r[e]; o(t, e, n[s]) } }, this.remove = function (e, u, s) { if (i(e, s = a(s))) { var l = r[e]; void 0 !== l && (l === n.length - 1 ? n.pop() : (n[l] = void 0, t.push(l)), delete r[e], 0 === n.length && (t = [])), o(u) } }, this.update = function (e, t, n, o) { i(e, o = a(o)) && (r.hasOwnProperty(e) ? this.addOrUpdate(e, t, n, o) : o({ message: "key not found", key: e })) } } i.create = function (e) { return new i(e) }, i.isSupported = function () { return !0 }, i.prototype.close = function () { }, i.prototype.defaultError = a, i.prototype.mechanism = "memory", t.exports = i }, utils: function (e, t, n) { "use strict"; function r(e) { return null !== e && void 0 !== e } var a = /^([^:\/?#]+:)?(\/\/[^\/?#]*)?([^?#:]+)?(\?[^#]*)?(#.*)?/, o = ["scheme", "authority", "path", "query", "fragment"]; function i(e) { var t = { isAbsolute: !1 }; if (e) { var n, r, i = a.exec(e); if (i) for (n = 0, r = o.length; n < r; n++)i[n + 1] && (t[o[n]] = i[n + 1]); t.scheme && (t.isAbsolute = !0) } return t } function u(e) { return "".concat(e.scheme || "", e.authority || "", e.path || "", e.query || "", e.fragment || "") } var s = /^\/{0,2}(?:([^@]*)@)?([^:]+)(?::{1}(\d+))?/, l = /%[0-9A-F]{2}/gi; function c(e) { for (var t = "", n = 0; n < e.length; n++) { var r = d(e[n]); null !== r && (t += f(r.toString(2))) } var a = [], o = parseInt(t.length / 8, 10); for (n = 0; n < o; n++) { var i = parseInt(t.substring(8 * n, 8 * (n + 1)), 2); a.push(i) } return a } function d(e) { var t = e.charCodeAt(0); return t >= 65 && t <= 90 ? t - 65 : t >= 97 && t <= 122 ? t - 65 - 6 : t >= 48 && t <= 57 ? t + 4 : "+" == e ? 62 : "/" == e ? 63 : null } function f(e) { for (; e.length < 6;)e = "0" + e; return e } function p(e) { return e && e.value ? e.value.length : 0 } e.inBrowser = function () { return "undefined" != typeof window }, e.activeXObject = function (e) { return window.ActiveXObject ? new window.ActiveXObject(e) : null }, e.assigned = r, e.contains = function (e, t) { var n, r; for (n = 0, r = e.length; n < r; n++)if (e[n] === t) return !0; return !1 }, e.defined = function (e, t) { return void 0 !== e ? e : t }, e.delay = function (e) { if (1 !== arguments.length) { var t = Array.prototype.slice.call(arguments, 1); window.setTimeout(function () { e.apply(this, t) }, 0) } else window.setTimeout(e, 0) }, e.djsassert = function (e, t, n) { if (!e) throw { message: "Assert fired: " + t, data: n } }, e.extend = function (e, t) { for (var n in t) e[n] = t[n]; return e }, e.find = function (e, t) { var n, r; if (e) for (n = 0, r = e.length; n < r; n++)if (t(e[n])) return e[n]; return null }, e.getURIInfo = i, e.isArray = function (e) { return "[object Array]" === Object.prototype.toString.call(e) }, e.isDate = function (e) { return "[object Date]" === Object.prototype.toString.call(e) }, e.isObject = function (e) { return "object" == typeof e }, e.normalizeURI = function (e, t) { if (!t) return e; var n = i(e); if (n.isAbsolute) return e; var r, a = i(t), o = {}; return n.authority ? (o.authority = n.authority, r = n.path, o.query = n.query) : (n.path ? (r = "/" === n.path.charAt(0) ? n.path : function (e, t) { var n, r = "/"; return t && (n = t.lastIndexOf("/"), "/" !== (r = t.substring(0, n)).charAt(r.length - 1) && (r += "/")), r + e }(n.path, a.path), o.query = n.query) : (r = a.path, o.query = n.query || a.query), o.authority = a.authority), o.path = function (e) { for (var t, n = "", r = ""; e;)0 === e.indexOf("..") || 0 === e.indexOf(".") ? e = e.replace(/^\.\.?\/?/g, "") : 0 === e.indexOf("/..") ? (e = e.replace(/^\/\..\/?/g, "/"), t = n.lastIndexOf("/"), n = -1 === t ? "" : n.substring(0, t)) : 0 === e.indexOf("/.") ? e = e.replace(/^\/\.\/?/g, "/") : (r = e, -1 !== (t = e.indexOf("/", 1)) && (r = e.substring(0, t)), n += r, e = e.replace(r, "")); return n }(r), o.scheme = a.scheme, o.fragment = n.fragment, u(o) }, e.normalizeURICase = function (e) { var t = i(e), n = t.scheme, r = t.authority; if (n && (t.scheme = n.toLowerCase(), r)) { var a = s.exec(r); a && (t.authority = "//" + (a[1] ? a[1] + "@" : "") + a[2].toLowerCase() + (a[3] ? ":" + a[3] : "")) } return (e = u(t)).replace(l, function (e) { return e.toLowerCase() }) }, e.parseInt10 = function (e) { return parseInt(e, 10) }, e.renameProperty = function (e, t, n) { e.hasOwnProperty(t) && (e[n] = e[t], delete e[t]) }, e.throwErrorCallback = function (e) { throw e }, e.trimString = function (e) { return e.trim ? e.trim() : e.replace(/^\s+|\s+$/g, "") }, e.undefinedDefault = function (e, t) { return void 0 !== e ? e : t }, e.decodeBase64 = c, e.convertByteArrayToHexString = function (e) { var t = []; if (void 0 === window.atob) t = c(e); else for (var n = window.atob(e), r = 0; r < n.length; r++)t.push(n.charCodeAt(r)); for (var a = "", o = 0; o < t.length; o++) { var i = t[o]; a += "0123456789ABCDEF"[i >> 4], a += "0123456789ABCDEF"[15 & i] } return a }, e.getJsonValueArraryLength = p, e.sliceJsonValueArray = function (e, t, n) { if (void 0 === e || void 0 === e.value) return e; t < 0 && (t = 0); var r = p(e); r < n && (n = r); var a = {}; for (var o in e) a[o] = "value" == o ? e[o].slice(t, n) : e[o]; return a }, e.concatJsonValueArray = function (e, t) { return void 0 === t || void 0 === t.value ? e : void 0 === e || 0 === Object.keys(e).length ? t : void 0 === e.value ? (e.value = t.value, e) : (e.value = e.value.concat(t.value), e) }, e.startsWith = function (e, t) { return 0 === e.indexOf(t) }, e.endsWith = function (e, t) { return -1 !== e.indexOf(t, e.length - t.length) }, e.getFormatKind = function (e, t) { var n = t; if (!r(e)) return n; switch (e.toLowerCase()) { case "none": n = 0; break; case "minimal": n = 1; break; case "full": n = 2 }return n } }, xml: function (e, t, n) { "use strict"; var r = n("./utils.js"), a = r.activeXObject, o = r.djsassert, i = r.extend, u = r.isArray, s = r.normalizeURI, l = "http://www.w3.org/", c = l + "1999/xhtml", d = l + "2000/xmlns/", f = l + "XML/1998/namespace", p = "http://www.mozilla.org/newlayout/xml/parsererror.xml"; function m(e) { return /(^\s)|(\s$)/.test(e) } function h(e, t, n) { try { e.setProperty(t, n) } catch (e) { } } function y() { try { var e = a("Msxml2.DOMDocument.6.0"); return e && (e.async = !0), e } catch (e) { return (t = a("Msxml2.DOMDocument.3.0")) && (h(t, "ProhibitDTD", !0), h(t, "MaxElementDepth", 256), h(t, "AllowDocumentFunction", !1), h(t, "AllowXsltScript", !1)), t } var t } function v(e, t, n) { throw "string" == typeof e && (e = { message: e }), i(e, { srcText: t || "", errorXmlText: n || "" }) } function g(e) { var t, a = void 0; if (!(a = r.inBrowser() ? window.DOMParser && new window.DOMParser : new (n("xmldom").DOMParser))) return (t = function (e) { var t = y(); if (!t) return null; t.loadXML(e); var n = t.parseError; return 0 !== n.errorCode && v(n.reason, n.srcText, e), t }(e)) || v("XML DOM parser not supported"), t; try { t = a.parseFromString(e, "text/xml") } catch (t) { v(t, "", e) } var o = t.documentElement, i = o.namespaceURI, u = x(o); if ("parsererror" === u && i === p) { var s = S(o, p, "sourcetext"), l = s ? C(s) : ""; v(N(o) || "", l, e) } if ("h3" === u && i === c || O(o, c, "h3")) { for (var d = "", f = [], m = o.firstChild; m;)1 === m.nodeType && (d += N(m) || ""), f.push(m.nextSibling), m = m.firstChild || f.shift(); v(d += N(o) || "", "", e) } return t } function E(e, t) { return e ? e + ":" + t : t } function b(e, t, n) { var r = T(e, t, n); return r ? C(r) : null } function T(e, t, n) { var r = e.attributes; return r.getNamedItemNS ? r.getNamedItemNS(n || null, t) : r.getQualifiedItem(t, n) || null } function D(e, t, n) { var r, a, o = n.split("/"); for (r = 0, a = o.length; r < a; r++)e = e && S(e, t, o[r]); return e || null } function S(e, t, n) { return w(e, t, n, !1) } function O(e, t, n) { if (e.getElementsByTagNameNS) { var r = e.getElementsByTagNameNS(t, n); return r.length > 0 ? r[0] : null } return w(e, t, n, !0) } function w(e, t, n, r) { var a = null; return A(e, r, function (e) { if (1 === e.nodeType) { var r = !t || P(e) === t, o = !n || x(e) === n; r && o && (a = e) } return null === a }), a } function N(e) { var t, n = null, r = 9 === e.nodeType && e.documentElement ? e.documentElement : e, a = !1 === r.ownerDocument.preserveWhiteSpace; return A(r, !1, function (e) { if (3 === e.nodeType || 4 === e.nodeType) { var o = C(e), i = a || !function (e) { return null === e || /^\s*$/.test(e) }(o); i || (void 0 === t && (t = function (e) { for (; null !== e && 1 === e.nodeType;) { var t = b(e, "space", f); if ("preserve" === t) return !0; if ("default" === t) break; e = e.parentNode } return !1 }(r)), i = t), i && (n ? n += o : n = o) } return !0 }), n } function x(e) { return e.localName || e.baseName } function P(e) { return e.namespaceURI || null } function C(e) { return 1 === e.nodeType ? N(e) : e.nodeValue } function A(e, t, n) { for (var r = [], a = e.firstChild, o = !0; a && o;)(o = n(a)) && (t && a.firstChild && r.push(a.firstChild), a = a.nextSibling || r.shift()) } function I(e, t) { if (!u(t)) return M(e, t); var n, r; for (n = 0, r = t.length; n < r; n++)t[n] && M(e, t[n]); return e } function M(e, t) { if (o(e !== t, "xmlAppendChild() - parent and child are one and the same!"), t) { if ("string" == typeof t) return function (e, t) { if (m(t.data)) { var n = T(e, f, "space"); n || M(e, n = _(e.ownerDocument, f, E("xml", "space"))), n.value = "preserve" } return e.appendChild(t), e }(e, G(e.ownerDocument, t)); 2 === t.nodeType ? e.setAttributeNodeNS ? e.setAttributeNodeNS(t) : e.setAttributeNode(t) : e.appendChild(t) } return e } function _(e, t, n, r) { var a = e.createAttributeNS && e.createAttributeNS(t, n) || e.createNode(2, n, t || void 0); return a.value = r || "", a } function R(e, t, n, r) { return I(e.createElementNS && e.createElementNS(nampespaceURI, n) || e.createNode(1, n, nampespaceURI || void 0), r || []) } function G(e, t) { return e.createTextNode(t) } function j(e) { var t = window.XMLSerializer; if (t) return (new t).serializeToString(e); if (e.xml) return e.xml; throw { message: "XML serialization unsupported" } } e.http = "http://", e.w3org = l, e.xmlNS = f, e.xmlnsNS = d, e.hasLeadingOrTrailingWhitespace = m, e.isXmlNSDeclaration = function (e) { var t = e.nodeName; return "xmlns" == t || 0 === t.indexOf("xmlns:") }, e.xmlAppendChild = M, e.xmlAppendChildren = I, e.xmlAttributeNode = T, e.xmlAttributes = function (e, t) { var n, r, a = e.attributes; for (n = 0, r = a.length; n < r; n++)t(a.item(n)) }, e.xmlAttributeValue = b, e.xmlBaseURI = function (e, t) { var n = T(e, "base", f); return (n ? s(n.value, t) : t) || null }, e.xmlChildElements = function (e, t) { A(e, !1, function (e) { return 1 === e.nodeType && t(e), !0 }) }, e.xmlFindElementByPath = D, e.xmlFindNodeByPath = function (e, t, n) { var r = n.lastIndexOf("/"), a = n.substring(r + 1), o = n.substring(0, r), i = o ? D(e, t, o) : e; return i ? "@" === a.charAt(0) ? T(i, a.substring(1), t) : S(i, t, a) : null }, e.xmlFirstChildElement = S, e.xmlFirstDescendantElement = O, e.xmlInnerText = N, e.xmlLocalName = x, e.xmlNamespaceURI = P, e.xmlNodeValue = C, e.xmlDom = function () { var e = window.document.implementation; return e && e.createDocument ? e.createDocument(null, null, null) : y() }, e.xmlNewAttribute = _, e.xmlNewElement = R, e.xmlNewFragment = function (e, t) { for (var n = g("<c>" + t + "</c>").documentElement, r = ("importNode" in e ? e.importNode(n, !0) : n), a = e.createDocumentFragment(), o = r.firstChild; o;)a.appendChild(o), o = o.nextSibling; return a }, e.xmlNewNodeByPath = function (e, t, n, r, a) { var o, i, u = "", s = a.split("/"), l = S, c = R, d = t; for (o = 0, i = s.length; o < i; o++) { "@" === (u = s[o]).charAt(0) && (u = u.substring(1), l = T, c = _); var f = l(d, n, u); f || M(d, f = c(e, n, E(r, u))), d = f } return d }, e.xmlNewNSDeclaration = function (e, t, n) { return _(e, d, E("xmlns", n), t) }, e.xmlNewText = G, e.xmlParse = g, e.xmlQualifiedName = E, e.xmlSerialize = j, e.xmlSerializeDescendants = function (e) { var t, n = e.childNodes, r = n.length; if (0 === r) return ""; var a = e.ownerDocument, o = a.createDocumentFragment(), i = a.createElement("c"); for (o.appendChild(i), t = 0; t < r; t++)i.appendChild(n[t]); var u = j(o); for (u = u.substr(3, u.length - 7), t = 0; t < r; t++)e.appendChild(i.childNodes[t]); return u }, e.xmlSiblingElement = function (e, t, n) { for (var r = e.nextSibling; r;) { if (1 === r.nodeType) { var a = !t || P(r) === t, o = !n || x(r) === n; if (a && o) return r } r = r.nextSibling } return null } } }, modules = {}, require = function (e) { var t = e.substring(e.lastIndexOf("/") + 1, e.length - 3); if (modules[t]) return modules[t].exports; if (modules[t] = { exports: {} }, console.log(t), "sou" === t); return datas[t].call(this, modules[t].exports, modules[t], require), modules[t].exports }; window.odatajs = {}, init.call(this, window.odatajs, window.odatajs, require);
//# sourceMappingURL=odatajs-4.0.1.map